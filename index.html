<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5237747574783843"
     crossorigin="anonymous"></script>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Xbloom Recipes | ÙˆØµÙØ§Øª Ø§ÙƒØ³ Ø¨Ù„ÙˆÙ…</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
:root{--gr:linear-gradient(135deg,#00A896,#4A90E2);--bg:#0A0A0A;--card:#1A1A1A;--up:#252525;--br:#2A2A2A;--t1:#fff;--t2:#A0A0A0;--ta:#00A896}
body{font-family:'Cairo',sans-serif;background:var(--bg);color:var(--t1);padding:12px;min-height:100vh}
.wrap{max-width:1400px;margin:0 auto}
header{text-align:center;padding:24px 15px;margin-bottom:20px;background:rgba(43,43,43,.9);border-radius:16px;border:1px solid var(--br);position:relative}
header::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:var(--gr);border-radius:16px 16px 0 0}
h1{font-size:clamp(1.7em,5vw,2.8em);font-weight:900;background:var(--gr);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:4px}
.sub{color:var(--t2);font-size:.9em}
.btn{padding:9px 18px;border-radius:10px;border:none;font-size:13px;font-weight:700;cursor:pointer;font-family:inherit;transition:.2s;display:inline-flex;align-items:center;gap:5px;text-decoration:none}
.btn:active{transform:scale(.95)}
.bp{background:var(--gr);color:#fff}
.bs{background:transparent;border:2px solid var(--br);color:var(--t2)}
.bsm{padding:7px 13px;font-size:12px}
.bbl{width:100%;justify-content:center}
.ctrls{margin-bottom:16px}
.sbox{position:relative;margin-bottom:13px}
.sbox input{width:100%;padding:13px 48px 13px 14px;font-size:15px;border:2px solid var(--br);border-radius:10px;background:var(--card);color:var(--t1);font-family:inherit}
.sbox input:focus{outline:none;border-color:var(--ta)}
.sbox::after{content:"\1F50D";position:absolute;left:14px;top:50%;transform:translateY(-50%);font-size:18px}
.fsec{margin-bottom:12px}
.flbl{font-size:.82em;color:var(--t2);margin-bottom:7px;font-weight:700}
.ftabs{display:flex;gap:7px;flex-wrap:wrap}
.ftab{padding:9px 14px;border-radius:9px;background:var(--card);border:2px solid var(--br);color:var(--t2);font-size:13px;font-weight:700;cursor:pointer;font-family:inherit;white-space:nowrap}
.ftab:active{transform:scale(.96)}
.ftab.on{background:var(--gr);color:#fff;border-color:transparent}
.cnt{display:inline-block;margin-right:4px;padding:1px 6px;background:rgba(255,255,255,.2);border-radius:7px;font-size:11px}
.ppbar{display:flex;align-items:center;gap:10px;padding:11px 14px;background:var(--card);border-radius:10px;border:1px solid var(--br);margin-bottom:16px;flex-wrap:wrap}
.ppbar label{font-size:.82em;color:var(--t2)}
.ppbar select{padding:6px 10px;border-radius:7px;background:var(--up);color:var(--t1);border:1px solid var(--br);font-family:inherit;font-size:13px}
.ppinfo{font-size:.82em;color:var(--t2);flex:1;text-align:center}
.ppinfo b{color:var(--t1)}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(min(100%,290px),1fr));gap:14px;margin-bottom:16px}
.card{background:var(--card);border-radius:12px;padding:17px;border:1px solid var(--br);transition:.3s;position:relative;overflow:hidden}
.card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:var(--gr);transform:scaleX(0);transition:.3s}
.card:hover{transform:translateY(-4px);box-shadow:0 10px 28px rgba(0,168,150,.2)}
.card:hover::before{transform:scaleX(1)}
.ch{display:flex;justify-content:space-between;margin-bottom:9px;gap:8px}
.cn{font-size:1.05em;font-weight:700;line-height:1.3;flex:1}
.cicos{display:flex;gap:5px}
.ib{width:31px;height:31px;border-radius:7px;background:var(--up);border:1px solid var(--br);display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:15px}
.ib:active{transform:scale(.88)}
.ib.fav{background:var(--gr)}
.cauth{color:var(--ta);font-size:.88em;margin-bottom:10px}
.ctags{display:flex;gap:5px;margin-bottom:11px;flex-wrap:wrap}
.tag{padding:4px 9px;border-radius:10px;font-size:.78em;font-weight:700;color:#fff}
.to{background:linear-gradient(135deg,#667eea,#764ba2)}
.tx{background:linear-gradient(135deg,#f093fb,#f5576c)}
.tth{background:linear-gradient(135deg,#4facfe,#00f2fe)}
.th{background:linear-gradient(135deg,#ff6b6b,#ee5a24)}
.tc{background:linear-gradient(135deg,#48dbfb,#0abde3)}
.ts{background:linear-gradient(135deg,#667eea,#764ba2)}
.cdets{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:11px}
.det{background:var(--up);padding:7px;border-radius:7px;text-align:center}
.dl{font-size:.73em;color:var(--t2);display:block;margin-bottom:2px}
.dv{font-size:.95em;font-weight:700}
/* â•â•â• Rating System â•â•â• */
.rating-wrap{margin-bottom:12px}
.cstars{display:flex;gap:3px;justify-content:center;margin-bottom:6px}
.star{font-size:22px;cursor:pointer;transition:transform .12s,filter .12s;line-height:1;display:inline-block}
.star:hover{transform:scale(1.25)}
.son{filter:none;opacity:1}
.soff{filter:grayscale(1);opacity:.3}
.shov{filter:none!important;opacity:1!important;transform:scale(1.2)}
.star.rated-mine{animation:starPop .35s ease}
@keyframes starPop{0%{transform:scale(1)}50%{transform:scale(1.5)}100%{transform:scale(1)}}
.rinfo{display:flex;align-items:center;justify-content:center;gap:8px;font-size:.78em;color:var(--t2)}
.ravg{font-weight:700;color:#ffd700;font-size:.88em}
.rcnt{color:var(--t2)}
.rmine{font-size:.72em;color:var(--ta);background:rgba(0,168,150,.12);padding:2px 8px;border-radius:10px}
.rloading{opacity:.5;pointer-events:none}
.cacts{display:flex;flex-direction:column;gap:7px}
.pgn{display:flex;justify-content:center;align-items:center;gap:7px;margin:16px 0 40px;flex-wrap:wrap}
.pb{min-width:38px;height:38px;padding:0 11px;border-radius:8px;background:var(--card);border:1px solid var(--br);color:var(--t2);font-size:14px;font-weight:700;cursor:pointer;font-family:inherit}
.pb:disabled{opacity:.4;cursor:not-allowed}
.pb.on{background:var(--gr);color:#fff;border-color:transparent}
.pb:hover:not(.on):not(:disabled){background:var(--up)}
.dots{color:var(--t2);padding:0 5px}
.empty{grid-column:1/-1;text-align:center;padding:55px 20px}
.empty h2{font-size:1.7em;color:var(--t1);margin-bottom:8px}
footer{text-align:center;padding:28px 15px;border-top:1px solid var(--br);color:var(--t2);font-size:.88em}
.fc{display:inline-block;padding:9px 22px;background:var(--gr);border-radius:18px;font-weight:700;color:#fff;margin-bottom:13px}
.toast{position:fixed;bottom:18px;left:50%;transform:translateX(-50%) translateY(100px);background:var(--card);padding:12px 18px;border-radius:10px;border:1px solid var(--br);z-index:2000;opacity:0;transition:.3s;max-width:88%;font-size:13px;text-align:center;pointer-events:none}
.toast.show{opacity:1;transform:translateX(-50%) translateY(0)}
.tok{border-color:#43e97b}
.terr{border-color:#f5576c}
/* Add Recipe Modal */
.ov{position:fixed;inset:0;background:rgba(0,0,0,.8);z-index:1000;display:none;align-items:center;justify-content:center;padding:12px;overflow-y:auto}
.ov.open{display:flex}
.modal{background:var(--card);border-radius:16px;border:1px solid var(--br);width:100%;max-width:520px;position:relative;max-height:94vh;overflow-y:auto;animation:fi .3s ease}
.mh{display:flex;justify-content:space-between;align-items:center;padding:18px 20px;border-bottom:1px solid var(--br);position:sticky;top:0;background:var(--card);z-index:2}
.mh h3{font-size:1.05em;font-weight:700}
.mx{background:none;border:none;color:var(--t2);font-size:1.8em;cursor:pointer;padding:0 4px;line-height:1}
.mf{padding:18px 20px;display:flex;flex-direction:column;gap:13px}
.fg label{font-size:.82em;color:var(--t2);display:block;margin-bottom:5px;font-weight:700}
.fi{width:100%;padding:11px 13px;background:var(--up);border:2px solid var(--br);border-radius:9px;color:var(--t1);font-size:14px;font-family:inherit}
.fi:focus{outline:none;border-color:var(--ta)}
.fr2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.tsel{display:flex;flex-direction:column;gap:7px}
.topt{padding:11px 14px;border-radius:9px;border:2px solid var(--br);cursor:pointer;display:flex;align-items:center;gap:9px;font-size:.9em;transition:.2s}
.topt:has(input:checked){border-color:var(--ta);background:rgba(0,168,150,.08)}
.topt.hot{border-color:rgba(255,107,107,.4)}
.topt.cold{border-color:rgba(72,219,251,.4)}
.topt.srv{border-color:rgba(102,126,234,.4)}
.topt input[type=radio]{accent-color:var(--ta);width:16px;height:16px}
.add-fab{position:fixed;bottom:24px;left:24px;width:56px;height:56px;border-radius:50%;background:var(--gr);border:none;color:#fff;font-size:24px;cursor:pointer;box-shadow:0 4px 20px rgba(0,168,150,.5);z-index:500;display:flex;align-items:center;justify-content:center;transition:.2s}
.add-fab:hover{transform:scale(1.08);box-shadow:0 6px 28px rgba(0,168,150,.7)}
.add-fab:active{transform:scale(.94)}
.add-header-btn{margin-top:14px}
.badge-new{display:inline-block;padding:2px 8px;border-radius:20px;font-size:.7em;font-weight:700;background:linear-gradient(135deg,#43e97b,#38f9d7);color:#000;margin-right:6px}
.spinning{animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
/* â•â•â• ANNOUNCEMENT BAR â•â•â• */
.anno-bar{padding:10px 16px;text-align:center;font-size:.88em;font-weight:700;position:relative;z-index:200;display:none}
.anno-bar.show{display:block}
.anno-bar.info{background:linear-gradient(135deg,#4A90E2,#357abd);color:#fff}
.anno-bar.success{background:linear-gradient(135deg,#43e97b,#38f9d7);color:#000}
.anno-bar.warning{background:linear-gradient(135deg,#ffd89b,#ff9a56);color:#000}
.anno-bar.promo{background:linear-gradient(135deg,#f093fb,#f5576c,#00A896);color:#fff}
.anno-close{position:absolute;left:12px;top:50%;transform:translateY(-50%);background:none;border:none;color:inherit;font-size:1.2em;cursor:pointer;opacity:.7}
.anno-close:hover{opacity:1}
/* â•â•â• PROMO TICKER â•â•â• */
.promo-ticker{background:var(--up);border-top:1px solid var(--br);border-bottom:1px solid var(--br);padding:8px 0;overflow:hidden;display:none;position:relative}
.promo-ticker.show{display:block}
.promo-ticker-inner{display:flex;gap:40px;animation:ticker 30s linear infinite;width:max-content}
.promo-ticker-inner:hover{animation-play-state:paused}
@keyframes ticker{from{transform:translateX(0)}to{transform:translateX(-50%)}}
.promo-item{display:flex;align-items:center;gap:8px;white-space:nowrap;font-size:.82em}
.promo-item-code{font-family:monospace;font-weight:900;color:var(--ta);background:rgba(0,168,150,.12);padding:2px 8px;border-radius:6px;letter-spacing:1px}
/* â•â•â• ADS INJECTION â•â•â• */
.ads-container{margin:14px 0;text-align:center;min-height:90px;background:rgba(255,255,255,.02);border:1px dashed var(--br);border-radius:10px;padding:10px;display:flex;align-items:center;justify-content:center;color:var(--t2);font-size:.78em}
.ads-container:empty{display:none}
/* â•â•â• PINNED RECIPES â•â•â• */
.pinned-banner{margin-bottom:16px}
.pinned-label{font-size:.82em;color:#ffd700;font-weight:700;margin-bottom:8px;display:flex;align-items:center;gap:6px}
.card-pinned{border:2px solid rgba(255,215,0,.4)!important;background:linear-gradient(135deg,rgba(255,215,0,.05),rgba(255,165,0,.03))!important}
.card-pinned::before{background:linear-gradient(135deg,#ffd700,#ff9a56)!important}
.pinned-badge{display:inline-flex;align-items:center;gap:4px;padding:3px 9px;border-radius:12px;font-size:.72em;font-weight:700;background:linear-gradient(135deg,#ffd700,#ff9a56);color:#000;margin-bottom:8px}
/* â•â•â• COMMENTS â•â•â• */
.comments-section{margin-top:14px;border-top:1px solid var(--br);padding-top:12px}
.comments-toggle{font-size:.82em;color:var(--ta);cursor:pointer;background:none;border:none;font-family:inherit;font-weight:700;padding:0;display:flex;align-items:center;gap:4px}
.comments-box{margin-top:10px;display:none}
.comments-box.open{display:block}
.rating-required-hint{font-size:.75em;color:var(--t2);margin-bottom:8px;padding:6px 10px;background:rgba(0,168,150,.08);border-radius:7px;border:1px solid rgba(0,168,150,.2)}
.stars-select{display:flex;gap:4px;margin-bottom:10px;justify-content:center}
.star-sel{font-size:26px;cursor:pointer;transition:.15s;line-height:1;filter:grayscale(1);opacity:.4}
.star-sel.active{filter:none;opacity:1;transform:scale(1.15)}
.star-sel:hover{filter:none;opacity:1}
.comment-textarea{width:100%;padding:10px 13px;background:var(--up);border:2px solid var(--br);border-radius:9px;color:var(--t1);font-size:13px;font-family:inherit;resize:vertical;min-height:70px;margin-bottom:8px}
.comment-textarea:focus{outline:none;border-color:var(--ta)}
.comment-submit{padding:8px 16px;background:var(--gr);border:none;border-radius:8px;color:#fff;font-size:12px;font-weight:700;cursor:pointer;font-family:inherit;display:inline-flex;align-items:center;gap:4px}
.comment-submit:disabled{opacity:.5;cursor:not-allowed}
.comments-list{margin-top:10px;display:flex;flex-direction:column;gap:8px;max-height:250px;overflow-y:auto}
.comment-item{background:var(--up);border-radius:8px;padding:10px 12px;border:1px solid var(--br)}
.comment-meta{font-size:.72em;color:var(--t2);margin-bottom:4px}
.comment-rating{color:#ffd700;font-size:.82em}
.comment-text{font-size:.85em;line-height:1.5;margin-top:4px}

@media(min-width:768px){body{padding:20px}.grid{grid-template-columns:repeat(auto-fill,minmax(310px,1fr));gap:20px}.card{padding:22px}}
@keyframes fi{from{opacity:0;transform:translateY(14px)}to{opacity:1;transform:translateY(0)}}
.ani{animation:fi .35s ease forwards}
/* Sort tabs */
.sort-wrap{margin-bottom:14px}
.sort-tabs{display:flex;gap:7px;flex-wrap:wrap}
.sort-tab{padding:8px 14px;border-radius:9px;background:var(--card);border:2px solid var(--br);color:var(--t2);font-size:13px;font-weight:700;cursor:pointer;font-family:inherit;white-space:nowrap;transition:.2s}
.sort-tab:active{transform:scale(.96)}
.sort-tab.on{background:linear-gradient(135deg,#f093fb,#f5576c);color:#fff;border-color:transparent}
</style>
</head>
<body>
<!-- ANNOUNCEMENT BAR -->
<div class="anno-bar" id="annoBar">
  <span id="annoText"></span>
  <button class="anno-close" onclick="this.parentElement.classList.remove('show')" title="Ø¥ØºÙ„Ø§Ù‚">âœ•</button>
</div>
<!-- PROMO TICKER -->
<div class="promo-ticker" id="promoTicker">
  <div class="promo-ticker-inner" id="promoTickerInner"></div>
</div>
<div class="wrap">
<header>
  <h1>&#x2615; Xbloom Recipes</h1>
  <p class="sub">ÙˆØµÙØ§Øª Ù…Ø¬ØªÙ…Ø¹ Ø§ÙƒØ³ Ø¨Ù„ÙˆÙ…</p>
  <button class="btn bp add-header-btn" onclick="openAddModal()">&#x2795; Ø´Ø§Ø±Ùƒ ÙˆØµÙØªÙƒ</button>
</header>
<div class="ctrls">
  <div class="sbox"><input type="text" id="srch" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† ÙˆØµÙØ©..." autocomplete="off"></div>
  <div class="fsec">
    <div class="flbl">&#x1F321;&#xFE0F; Ù†ÙˆØ¹ Ø§Ù„ØªØ­Ø¶ÙŠØ±:</div>
    <div class="ftabs" id="tempG">
      <button class="ftab on"  onclick="setF('temp','all',this)"><span class="cnt" id="nAll">0</span> Ø§Ù„ÙƒÙ„</button>
      <button class="ftab"     onclick="setF('temp','hot',this)"><span class="cnt" id="nHot">0</span> &#x1F525; ÙˆØµÙØ§Øª Ø­Ø§Ø±Ø©</button>
      <button class="ftab"     onclick="setF('temp','cold',this)"><span class="cnt" id="nCold">0</span> &#x1F9CA; ÙˆØµÙØ§Øª Ø¨Ø§Ø±Ø¯Ø©</button>
      <button class="ftab"     onclick="setF('temp','server',this)"><span class="cnt" id="nSrv">0</span> ØºØ³ÙŠÙ„ ÙˆØªØ±Ø·ÙŠØ¨ Ø§Ù„Ø³ÙŠØ±ÙØ±</button>
    </div>
  </div>
  <div class="fsec">
    <div class="flbl">&#x2615; Ø§Ù„Ù…Ø­Ø¶Ù‘Ø±:</div>
    <div class="ftabs" id="brewG">
      <button class="ftab on"  onclick="setF('brew','all',this)"><span class="cnt" id="bAll">0</span> Ø§Ù„ÙƒÙ„</button>
      <button class="ftab"     onclick="setF('brew','Omni',this)"><span class="cnt" id="bOmni">0</span> Omni</button>
      <button class="ftab"     onclick="setF('brew','xPod',this)"><span class="cnt" id="bXPod">0</span> xPod</button>
      <button class="ftab"     onclick="setF('brew','Other',this)"><span class="cnt" id="bOther">0</span> Other</button>
    </div>
  </div>
</div>
<div class="sort-wrap">
  <div class="flbl">&#x1F4CA; Ø§Ù„ØªØ±ØªÙŠØ¨:</div>
  <div class="sort-tabs">
    <button class="sort-tab on" onclick="setSort('default',this)">&#x1F4CB; Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ</button>
    <button class="sort-tab"   onclick="setSort('top',this)">&#x2B50; Ø§Ù„Ø£Ø¹Ù„Ù‰ ØªÙ‚ÙŠÙŠÙ…Ø§Ù‹</button>
    <button class="sort-tab"   onclick="setSort('newest',this)">&#x1F195; Ø§Ù„Ù…Ø¶Ø§ÙØ© Ø­Ø¯ÙŠØ«Ø§Ù‹</button>
  </div>
</div>
<div class="ppbar">
  <label>Ø¹Ø±Ø¶:</label>
  <select onchange="setPP(this.value)">
    <option value="12">12</option>
    <option value="24" selected>24</option>
    <option value="48">48</option>
    <option value="96">96</option>
  </select>
  <div class="ppinfo" id="ppinfo">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
</div>
<!-- ADS TOP INJECTION -->
<div class="ads-container" id="adsTopContainer"></div>
<!-- PINNED RECIPES -->
<div class="pinned-banner" id="pinnedBanner" style="display:none">
  <div class="pinned-label">ğŸ“Œ ÙˆØµÙØ§Øª Ù…Ø«Ø¨ØªØ©</div>
  <div class="grid" id="pinnedGrid"></div>
</div>
<div class="grid" id="grid"></div>
<div class="pgn" id="pgn"></div>
<footer id="siteFooter">
  <div class="fc" id="fcount">Ø¹Ø¯Ø¯ Ø§Ù„ÙˆØµÙØ§Øª ÙÙŠ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹: 0</div>
  <p id="footerCopy">&#169; 2026 Xbloom Recipes</p>
  <p id="footerSub" style="margin-top:6px;font-size:.8em">Ø¬Ù…ÙŠØ¹ Ø­Ù‚ÙˆÙ‚ Ø§Ù„ÙˆØµÙØ§Øª Ù…Ø­ÙÙˆØ¸Ø© Ù„Ù…Ù†Ø´Ø¦ÙŠÙ‡Ø§</p>
  <p id="footerDev" style="margin-top:5px;font-size:.75em;color:#3a3a3a">ABDULELAH ALSUFAYAN</p>
</footer>
</div>
<div class="toast" id="toast"></div>

<!-- FAB Ø²Ø± Ø¹Ø§Ø¦Ù… -->
<button class="add-fab" onclick="openAddModal()" title="Ø£Ø¶Ø§ÙØ© ÙˆØµÙØ© Ø¬Ø¯ÙŠØ¯Ø©">&#x2795;</button>

<!-- Modal: Add Recipe -->
<div class="ov" id="addOv">
<div class="modal">
  <div class="mh">
    <h3>&#x2615; Ø§Ø¶Ø§ÙØ© ÙˆØµÙØ© Ø¬Ø¯ÙŠØ¯Ø©</h3>
    <button class="mx" onclick="closeAddModal()">&#xD7;</button>
  </div>
  <form class="mf" onsubmit="submitRecipe(event)">
    <div class="fr2">
      <div class="fg"><label>Ø§Ø³Ù… Ø§Ù„ÙˆØµÙØ© *</label><input class="fi" id="rN" required placeholder="Ù…Ø«Ø§Ù„: Ù…Ø­Ù…ØµØ© Ù…Ø¬ØªÙ…Ø¹ Ø§ÙƒØ³ Ø¨Ù„ÙˆÙ… g"></div>
      <div class="fg"><label>Ø§Ø³Ù…Ùƒ</label><input class="fi" id="rA" placeholder="  Ø§Ø³Ù… Ù…Ø§Ù„Ùƒ Ø§Ù„ÙˆØµÙØ© "></div>
    </div>
    <div class="fr2">
      <div class="fg"><label>Ø§Ù„Ù…Ø­Ø¶Ù‘Ø± *</label>
        <select class="fi" id="rBr" required>
          <option value="">Ø§Ø®ØªØ±</option>
          <option value="Omni">Omni</option>
          <option value="xPod">xPod</option>
          <option value="Other">Other</option>
        </select>
      </div>
      <div class="fg"><label>Ø§Ù„Ø¬Ø±Ø¹Ø© *</label><input class="fi" id="rD" required placeholder="15g"></div>
    </div>
    <div class="fg"><label>Ø§Ù„Ù†Ø³Ø¨Ø©</label><input class="fi" id="rR" placeholder="1:16 - 225ML"></div>
    <div class="fg"><label>Ù†ÙˆØ¹ Ø§Ù„ØªØ­Ø¶ÙŠØ± *</label>
      <div class="tsel">
        <div class="topt hot"><input type="radio" name="rc" id="rHot" value="hot" required onchange="onTypeChange(this)"><label for="rHot">&#x1F525; ÙˆØµÙØ© Ø­Ø§Ø±Ø©</label></div>
        <div class="topt cold"><input type="radio" name="rc" id="rCold" value="cold" onchange="onTypeChange(this)"><label for="rCold">&#x1F9CA; ÙˆØµÙØ© Ø¨Ø§Ø±Ø¯Ø©</label></div>
        <div class="topt srv"><input type="radio" name="rc" id="rSrv" value="server" onchange="onTypeChange(this)"><label for="rSrv">&#x2699;&#xFE0F; ØºØ³ÙŠÙ„ Ø§Ù„ÙÙ„ØªØ± </label></div>
      </div>
    </div>
    <div class="fg" id="iceField" style="display:none;animation:fi .3s ease">
      <label style="color:#48dbfb">&#x1F9CA; ÙˆØ²Ù† Ø§Ù„Ø«Ù„Ø¬ ÙÙŠ Ø§Ù„ÙƒÙˆØ¨ *</label>
      <div style="position:relative">
        <input class="fi" type="number" id="rIce" placeholder="Ù…Ø«Ø§Ù„: 150" min="1" max="999" style="padding-left:50px">
        <span style="position:absolute;left:14px;top:50%;transform:translateY(-50%);color:var(--t2);font-size:.88em;font-weight:700">Ø¬Ø±Ø§Ù…</span>
      </div>
      <div style="font-size:.75em;color:var(--t2);margin-top:5px">ÙƒÙ…ÙŠØ© Ø§Ù„Ø«Ù„Ø¬ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ÙˆØµÙØ©</div>
    </div>
    <div class="fg">
      <label>Ø±Ø§Ø¨Ø· Ø§Ù„ÙˆØµÙØ© Ù…Ù† xBloom *</label>
      <input class="fi" type="url" id="rL" required placeholder="https://share-h5.xbloom.com/?id=...">
      <div style="font-size:.75em;color:var(--t2);margin-top:5px">Ø§ÙØªØ­ Ø§Ù„ÙˆØµÙØ© ÙÙŠ ØªØ·Ø¨ÙŠÙ‚ xBloom Ø«Ù… Ø§Ø¶ØºØ· Ù…Ø´Ø§Ø±ÙƒØ© ÙˆØ§Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·</div>
    </div>
    <button type="submit" class="btn bp bbl" id="submitBtn" style="padding:14px;font-size:14px">
      &#x1F4E4; Ù†Ø´Ø± Ø§Ù„ÙˆØµÙØ©
    </button>
  </form>
</div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getDatabase, ref, onValue, push, runTransaction, set } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";
const firebaseConfig={apiKey:"AIzaSyDq370Yy4W-TfbyFL5rt4y3h3ngajJVIrE",databaseURL:"https://xbloom-recipes-hub-default-rtdb.europe-west1.firebasedatabase.app",projectId:"xbloom-recipes-hub"};
const app=initializeApp(firebaseConfig);
const db=getDatabase(app);
const recipesRef=ref(db,'recipes');
const ratingsRef=ref(db,'ratings');
const INIT = [{"name": "ÙˆØµÙØ© Ø¨Ø§Ø±Ø¯Ù‡ 24 Ø¬Ø±Ø§Ù… Ù‚Ù‡ÙˆØ©", "author": "mf", "brewer": "Other", "dose": "24g", "ratio": "1:7", "link": "https://share-h5.xbloom.com/?id=ZZxY4cY1PPjQ2M3HyuQQkg%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "Abla | Colombia 20G", "author": "Abdulrahman alnasser", "brewer": "Other", "dose": "20g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=Zv1nKEbBLN%2BB309uAYN9xg%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "AboZee 25g", "author": "AboZee", "brewer": "Omni", "dose": "15g", "ratio": "1:25", "link": "https://share-h5.xbloom.com/?id=ztElW2DfyC6D2Ft%2FEdYZ7Q%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Ø¯ÙŠ ÙƒØ§Ù Ø¨Ù„Ø§Ùƒ Ù†Ø§ÙŠØª", "author": "Majed", "brewer": "Other", "dose": "20g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=Zs%2BDXkRFyUkoUJVLZ8wCrw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Arriyadh Sidamo Natural", "author": "Arriyadh", "brewer": "xPod", "dose": "15g", "ratio": "1:16", "link": "https://share-h5.xbloom.com/?id=ZrYi4IY%2BOcoI%2BQ3RBifZUw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Pepperpot Tea Hibiscus Berry Iced", "author": "", "brewer": "Omni", "dose": "5g", "ratio": "~240ml", "link": "https://share-h5.xbloom.com/?id=ZOEKEzL3WtTTfSIrfUPMyA%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "ice 100g", "author": "M", "brewer": "Other", "dose": "20g", "ratio": "1:7", "link": "https://share-h5.xbloom.com/?id=zIuOeVvubuydUfN%2Befj1Sg%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "cold150", "author": "Jazaa", "brewer": "Omni", "dose": "18g", "ratio": "1:8", "link": "https://share-h5.xbloom.com/?id=ZHNDm7R1vKaAVpS2f7cPqg%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "ÙˆØµÙØ© 15 Ø¬Ø±Ø§Ù… Ø§Ø«ÙŠÙˆØ¨ÙŠ", "author": "Abdullah", "brewer": "Omni", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=ZHdgDqVThoshjr7eZN4QJw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Ø£Ø¨Ùˆ Ø±Ø§Ø³", "author": "Ghadah", "brewer": "Other", "dose": "22g", "ratio": "1:16", "link": "https://share-h5.xbloom.com/?id=ZDEw2sIKBGvY7OIrBbyimQ%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ÙÙŠØµÙ„ ÙŠÙˆÙ†Ø³ - ØµØºÙŠØ±", "author": "MF", "brewer": "Other", "dose": "15g", "ratio": "1:16", "link": "https://share-h5.xbloom.com/?id=Z8M5K%2BUcr9pksOjL9MckxQ%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Ø§Ù†Ø§Ù†Ø§Ø³ Ø¨Ù„Ø§Ùƒ Ù†Ø§ÙŠØª Ø¨Ø§Ø±Ø¯", "author": "Ø§Ø¨Ùˆ ÙˆØ³Ù†", "brewer": "Other", "dose": "23g", "ratio": "1:7", "link": "https://share-h5.xbloom.com/?id=z2aZem4GJiagl%2F0Ai2mS8Q%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "Ø´Ø§ÙŠ Ø§Ù„ÙˆØ²Ø©", "author": "Essa", "brewer": "Omni", "dose": "3g", "ratio": "~360ml", "link": "https://share-h5.xbloom.com/?id=YZ6maOZHWqVVSH6uHebgmQ%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ÙˆÙŠÙ„Ø§", "author": "ABDULAZIZ", "brewer": "Other", "dose": "20g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=ywtZFka1zAfA2RAqbWvsfw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Iced Coffee", "author": "", "brewer": "xPod", "dose": "15g", "ratio": "1:10", "link": "https://share-h5.xbloom.com/?id=yFRPu9hIS4y6IjuDAirNMQ%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "COLD BRO", "author": "XBLOOM Adel Badwilan", "brewer": "xPod", "dose": "15g", "ratio": "1:10", "link": "https://share-h5.xbloom.com/?id=YDoSObYqp5HFjnFJHkvydQ%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "Brew over 150 ICE", "author": "Hrs", "brewer": "Omni", "dose": "15g", "ratio": "1:10", "link": "https://share-h5.xbloom.com/?id=Ycj1mFbeWOMUWFi8f6eUAQ%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "Ø¨Ø§Ø±Ø¯ ğŸ§Š", "author": "Ø¹Ø§Ø¦Ø¶ Ø§Ù„Ø¹ØªÙŠØ¨ÙŠ", "brewer": "Other", "dose": "20g", "ratio": "1:7", "link": "https://share-h5.xbloom.com/?id=Y7kxrFLXHmkJAsj7JrrCgA%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "fzz_81 - UGANDA", "author": "Fuad Al Zahrani", "brewer": "Omni", "dose": "15g", "ratio": "1:16", "link": "https://share-h5.xbloom.com/?id=Y3XWHFSyqt1BtBVVVS7NZQ%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "20g Colombia with grind|Aseel", "author": "abdulla alqarni", "brewer": "Other", "dose": "20g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=Y1jcHo1jeu4jMskNWnc2xg%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Ø§ÙˆØºÙ†Ø¯ÙŠ ÙˆÙŠÙ†Ø¯ Ø¬Ø¯ÙŠØ¯", "author": "Emad", "brewer": "Omni", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=XyLGiloGRIRxDWJMlwn5UA%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "20g Colombia with grind|Aseel", "author": "Hadeel", "brewer": "Other", "dose": "20g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=xXsrNAdUzELj1dCMB31L9g%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Nj | Kasuya 20g", "author": "Najla", "brewer": "Other", "dose": "20g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=xxCCzvg1KWUW8I7ER3ulyQ%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "surge ice Ø§Ù„Ø«Ù„Ø¬ 150", "author": "puresoul.ma", "brewer": "Other", "dose": "20g", "ratio": "1:10", "link": "https://share-h5.xbloom.com/?id=Xu5LoRZQpNa4jpjV1MzWJQ%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "Ø¨Ø§Ø±Ø¯", "author": "Bader", "brewer": "Omni", "dose": "18g", "ratio": "1:7", "link": "https://share-h5.xbloom.com/?id=xSi8xAYQA4atCP8Asd6AuA%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "Ethiopia ice", "author": "Gasim Hakami", "brewer": "Omni", "dose": "15g", "ratio": "1:10", "link": "https://share-h5.xbloom.com/?id=Xn2ODVjt5LS%2B6Q7LiY8pnA%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "Cold", "author": "Najla", "brewer": "Omni", "dose": "18g", "ratio": "1:9", "link": "https://share-h5.xbloom.com/?id=xl9kwADxKDKMHf%2F5Jb7LJw%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "orea Classic 20g", "author": "RAED", "brewer": "Other", "dose": "20g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=xiz4JJhiyIZ%2BZHaA1IZ%2Fdw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "NJ COLD | ÙƒÙ…ÙŠØ© Ø§Ù„Ø«Ù„Ø¬ Ù¡Ù¥Ù  Ø¬Ø±Ø§Ù…", "author": "Abdallh Al-Sultan", "brewer": "Other", "dose": "20g", "ratio": "1:7", "link": "https://share-h5.xbloom.com/?id=Xhef9RIOPNSVZyPCEOtonQ%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "SOIL GUJI", "author": "", "brewer": "xPod", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=XgzAZWMAV5y4PjgFyhA1TA%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Ethiopia Biloya", "author": "Bassam", "brewer": "Other", "dose": "20g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=xEj5EG6QjqUiOM3Z7X8dbA%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ØªØ¬Ø±Ø¨Ù‡ 2 Ø¨Ø§Ø±Ø¯", "author": "Gasim Hakami", "brewer": "Other", "dose": "20g", "ratio": "1:7", "link": "https://share-h5.xbloom.com/?id=xe8UTT37KCuxI4y5gz%2Bt9Q%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "Colombia Washed Light", "author": "", "brewer": "xPod", "dose": "15g", "ratio": "1:17", "link": "https://share-h5.xbloom.com/?id=XdNuOm5mA0kZP0JWSwSoIg%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Ù¢Ù  Ø¬Ø±Ø§Ù… Ø§ÙˆÙ…Ù†ÙŠ", "author": "Ali", "brewer": "Other", "dose": "20g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=X5nxWI5U7FWBhfZU961TiA%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ice drip recipe", "author": "Authentic", "brewer": "Other", "dose": "20g", "ratio": "1:8", "link": "https://share-h5.xbloom.com/?id=x3M8vrGKocxmRt1ZS97sgA%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "ÙˆØµÙØ© Ø§Ø¨Ùˆ Ø§ØµÙŠÙ„ Ø­Ø§Ø±", "author": "Faisal", "brewer": "Omni", "dose": "18g", "ratio": "1:16", "link": "https://share-h5.xbloom.com/?id=WybicM2lKEYTHmzWTfN%2B%2Bg%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "High Sweetness ğŸ¯", "author": "Mohamd", "brewer": "Other", "dose": "20g", "ratio": "1:7", "link": "https://share-h5.xbloom.com/?id=wQmY93Qh3stVj0p3rXwDRg%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Ù‚ÙŠØ¯Ø¨ Ù…ØµÙ†Ø¹ Ø§Ù„Ù‚Ù‡ÙˆØ©", "author": "Abdullah", "brewer": "Omni", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=wBODV6u50yVDgx0DIIAQkw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Orea 15 gram Ø§Ù„Ø£Ø³Ø§Ø³", "author": "Sultan", "brewer": "Other", "dose": "15g", "ratio": "1:16", "link": "https://share-h5.xbloom.com/?id=wbIItzIgVTda1YhjUFQJ6g%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Ø§Ù†Ø§Ù†Ø§Ø³", "author": "Ø£Ø¨ÙˆØ¹Ø¨Ø¯Ø§Ù„Ø±Ø­Ù…Ù†", "brewer": "Other", "dose": "20g", "ratio": "1:16", "link": "https://share-h5.xbloom.com/?id=W9gZa0eGAEvmGQBJZsNSbA%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ÙƒÙˆØ¨ Ø«Ù‚ÙŠÙ„", "author": "Abdallh Al-Sultan", "brewer": "Other", "dose": "20g", "ratio": "1:7", "link": "https://share-h5.xbloom.com/?id=VYCp0pG9Rk%2FKcx1LLFRUHA%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "faisal younis Xpods 6T", "author": "Abdulrahman alnasser", "brewer": "xPod", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=VsnipSCO9SPag6Fc5e2%2FkA%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Filter Rinse", "author": "SHADDAD", "brewer": "Other", "dose": "10g", "ratio": "1:7", "link": "https://share-h5.xbloom.com/?id=vqSQON%2FLhNbHwqsa8USrsw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "60ml - 20g 1:15 ratio", "author": "Shabib", "brewer": "Other", "dose": "20g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=vqoWL%2FhpGg17USllk8KJdg%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "MHğŸ§Šâ˜•ï¸", "author": "MH", "brewer": "Other", "dose": "20g", "ratio": "1:7", "link": "https://share-h5.xbloom.com/?id=VlNhaY4iek%2Fk7GKRJGndGw%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "Cold Recipe 150 Ø«Ù„Ø¬", "author": "Abdullah alshalawi", "brewer": "Other", "dose": "20g", "ratio": "1:7", "link": "https://share-h5.xbloom.com/?id=vciDPAlWu7P03xCPc0UYAA%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "A.Almassari / 25g", "author": "Muneera", "brewer": "Other", "dose": "25g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=V9OSolM1fdsrfEz8FHwXsw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ÙˆØµÙØ© Ø§Ù„Ø¨Ø§Ø±Ø¯", "author": "ADEL SPACE", "brewer": "Omni", "dose": "17g", "ratio": "1:7", "link": "https://share-h5.xbloom.com/?id=V9eqQyyaSfuxowGSgEJeFQ%3D%3D", "temperature": "cold", "category": "cold"}, {"name": 15, "author": "Muneera", "brewer": "Omni", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=UY4Y%2BSkLErm%2FifnzkgNLoA%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "v60 25 g", "author": "Hussain", "brewer": "Other", "dose": "25g", "ratio": "1:16", "link": "https://share-h5.xbloom.com/?id=uX6NLJlh3wd3Yj5CST%2Fdbw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ÙƒÙˆØ³ØªØ±ÙŠÙƒÙŠ Ø¨Ù„ÙˆÙ…", "author": "Emad", "brewer": "xPod", "dose": "15g", "ratio": "1:12", "link": "https://share-h5.xbloom.com/?id=uTuyB8bn7uVsEHQSS2XngA%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "NğŸ§ŠğŸ’œ", "author": "Noha", "brewer": "Omni", "dose": "18g", "ratio": "1:10", "link": "https://share-h5.xbloom.com/?id=urudC1Wq9v5Y%2Byjh%2FaoD1w%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "ØºØ³ÙŠÙ„ Ø§Ù„ÙÙ„ØªØ± ÙˆØªØ³Ø®ÙŠÙ† Ø§Ù„Ø³ÙŠØ±ÙØ± ÙÙ‚Ø·", "author": "Naif", "brewer": "Omni", "dose": "8g", "ratio": "1:5", "link": "https://share-h5.xbloom.com/?id=UGbuMoV9DGzaNMEyHIuL1Q%3D%3D", "temperature": "hot", "category": "server"}, {"name": "AboAseeL 20g | Ethiopia", "author": "Ø£Ø¨ÙˆØ¹Ø¨Ø¯Ø§Ù„Ø±Ø­Ù…Ù†", "brewer": "Other", "dose": "20g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=UG5%2FcjagDwuq47g0mrHKLg%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ØºØ³ÙŠÙ„ Ø§Ù„ÙÙ„ØªØ± ÙˆØªØ³Ø®ÙŠÙ† Ø§Ù„Ø³ÙŠØ±ÙØ± ÙÙ‚Ø·", "author": "ABDULLAH", "brewer": "Other", "dose": "12g", "ratio": "1:5", "link": "https://share-h5.xbloom.com/?id=Ufjl2IJPb9XpYCNjyvqtyQ%3D%3D", "temperature": "hot", "category": "server"}, {"name": "Ø¨ÙˆØ´Ø§Ù†20Ù‚Ø±Ø§Ù…", "author": "Ø£Ø¨ÙˆØ¹Ø¨Ø¯Ø§Ù„Ø±Ø­Ù…Ù†", "brewer": "Other", "dose": "20g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=uBbHZvLSbDzmEaeeINV%2FQw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ÙˆØµÙØ© 15 ØºØ±Ø§Ù… Ø¨Ø§Ø±Ø¯", "author": "ÙŠÙˆØ³Ù Ø§Ù„Ø¹Ù…ÙŠØ±ÙŠ", "brewer": "Omni", "dose": "15g", "ratio": "1:10", "link": "https://share-h5.xbloom.com/?id=UAQm6m2c6ZBH20admXIqbg%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "Ù…Ø§Ø¯Ù‡ÙŠÙ„ÙŠÙ†Ù‚ ØªØ±ÙŠÙØ§Ù„ÙŠ", "author": "Ø¹Ø§Ø¦Ø¶ Ø§Ù„Ø¹ØªÙŠØ¨ÙŠ", "brewer": "Other", "dose": "20g", "ratio": "1:14", "link": "https://share-h5.xbloom.com/?id=uAl2AaCa4xnRWVIBu3geyw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Curve Excelso", "author": "", "brewer": "xPod", "dose": "15g", "ratio": "1:17", "link": "https://share-h5.xbloom.com/?id=u%2B1MvUtUjg9VZe4O4nIgag%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Ø±ÙˆÙÙŠØ±Ø§ Ø¨Ø§Ø±Ø¯ Ø§Ù„Ø«Ù„Ø¬ 130 Ù…Ù„", "author": "Riza", "brewer": "Omni", "dose": "18g", "ratio": "1:10", "link": "https://share-h5.xbloom.com/?id=tsjs3M8TVnZ6DJtSti3KEg%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "ØµÙˆØ§Ø¹- Ù‡ÙˆÙŠÙ„Ø§ (Ø­Ø§Ø±) 2:38", "author": "Ibrahim", "brewer": "xPod", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=tRXq5usokk1tzU2IFE4iZw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Ø¨Ø§Ø±Ù‚ Ø¬Ø¯ÙŠØ¯", "author": "Emad", "brewer": "xPod", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=TQXWjvO%2F3bCAhgN6PTiBPA%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "16 - 90", "author": "Muneera", "brewer": "Omni", "dose": "16g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=TP7yhokZxklUO5aIBUrpYA%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "16;", "author": "Muneera", "brewer": "Omni", "dose": "16g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=TjJpiPL2ChiOf9dVlPderA%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Ø§Ø«ÙŠÙˆØ¨ÙŠ Ù„Ø§Ù‡ÙˆØ§Ø¦ÙŠ - fzz_81", "author": "Fuad Al Zahrani", "brewer": "Other", "dose": "20g", "ratio": "1:16", "link": "https://share-h5.xbloom.com/?id=TgBHZ8EAVgRyGXfcalqP5A%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Competition Style", "author": "Mohammed", "brewer": "Omni", "dose": "15g", "ratio": "1:16", "link": "https://share-h5.xbloom.com/?id=TfwI1%2FWL4ZWeo5AwnqW%2BAw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "OREA", "author": "XBLOOM Adel Badwilan", "brewer": "Omni", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=Temmj%2FloRVzTyTC4kllPwg%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Adham - Black Knight", "author": "Khalid Alzeer", "brewer": "xPod", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=tCrNDPCiRZ16J617YJ%2BBmg%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Ø¹Ø§Ù„Ù… Ø§Ù„Ù†Ø±Ø¬Ø³", "author": "Anas", "brewer": "Omni", "dose": "15g", "ratio": "1:17", "link": "https://share-h5.xbloom.com/?id=TbLAhkOBCwBzWUPLQZxN%2FQ%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Ø­Ù…Ø¶ÙŠØ© Ø§ÙƒØ«Ø±", "author": "Ù…Ø­Ù…Ø¯", "brewer": "Other", "dose": "20g", "ratio": "1:6", "link": "https://share-h5.xbloom.com/?id=tbGPB%2B%2BBJ%2FahPjlKdhZTTg%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ICE RESIPE DRIPPER", "author": "AMR", "brewer": "Other", "dose": "20g", "ratio": "1:7", "link": "https://share-h5.xbloom.com/?id=Tb4BSC2hFxjDLy0vt0ko6A%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "ØªØ¬Ø±Ø¨Ø© Ø´ÙŠØ® Ø§Ù„Ø¨Ø§Ø±Ø¯Ø©", "author": "Wssan", "brewer": "Omni", "dose": "15g", "ratio": "1:11", "link": "https://share-h5.xbloom.com/?id=TA2%2Bvsh1l2WViez8vcSRhQ%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "Ethiopia Colombia Various", "author": "Obaid", "brewer": "Omni", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=t9CEXxiwTP%2BrBmAAgjz8kg%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ÙˆØµÙÙ‡ Ù…Ø¹ØªÙ…Ø¯Ø© ğŸ¤", "author": "ÙŠÙˆØ³Ù Ø§Ù„Ø¹Ù…ÙŠØ±ÙŠ", "brewer": "Other", "dose": "15g", "ratio": "1:16", "link": "https://share-h5.xbloom.com/?id=t8QOd3BEu12ZFrQcW9TwhQ%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Gadeb - ORO", "author": "Khalid Alzeer", "brewer": "Other", "dose": "20g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=szOJ4VoXSiMOuHLzjZ0qqQ%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "FIKRI - BUNAH ğŸ§Š", "author": "Khaled", "brewer": "Omni", "dose": "15g", "ratio": "1:8", "link": "https://share-h5.xbloom.com/?id=SyHQH%2Fcu5k3UzDj79%2BGNxQ%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "ÙˆØµÙÙ‡ ÙŠØ§Ø¨Ø§Ù†ÙŠÙ‡", "author": "Ù£Ù£", "brewer": "xPod", "dose": "15g", "ratio": "1:10", "link": "https://share-h5.xbloom.com/?id=sxRqqKBXHzZ%2B3dI9XrWNnw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ÙˆØµÙØ© Ø­Ø§Ø± Ù¡Ù¥", "author": "ADEL SPACE", "brewer": "Omni", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=swEQnkHq3CBMcaQuoN8epA%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ØºØ³ÙŠÙ„ Ø§Ù„ÙÙ„ØªØ± ÙˆØªØ³Ø®ÙŠÙ† Ø§Ù„Ø³ÙŠØ±ÙØ± ÙÙ‚Ø·", "author": "Abo A7mad", "brewer": "Other", "dose": "6g", "ratio": "1:5", "link": "https://share-h5.xbloom.com/?id=SqhDigZQvqdzDLZHX%2B55dw%3D%3D", "temperature": "hot", "category": "server"}, {"name": 16, "author": "Muneera", "brewer": "Omni", "dose": "16g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=sosC1hIlAIVOSPAOVRzYdA%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ÙŠÙ…Ù†ÙŠ Ø­Ø§Ø±", "author": "Ø£Ø¨ÙˆØ¹Ø¨Ø¯Ø§Ù„Ø±Ø­Ù…Ù†", "brewer": "Omni", "dose": "18g", "ratio": "1:16", "link": "https://share-h5.xbloom.com/?id=sLEYnAQ0q8tx6rehosfQHA%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "surge ice Ø§Ù„Ø«Ù„Ø¬ 150", "author": "puresoul.ma", "brewer": "Other", "dose": "20g", "ratio": "1:10", "link": "https://share-h5.xbloom.com/?id=sjyJ%2B43wG%2BHPBIjwTb4%2BPA%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "Ø§ÙŠØ³ Ø¯Ø±ÙŠØ¨/ Ø«Ù„Ø¬ 120", "author": "Muneera", "brewer": "Other", "dose": "25g", "ratio": "1:7", "link": "https://share-h5.xbloom.com/?id=s8WtsKcuyrJQI5PIY%2B111w%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "ÙƒÙˆØ³ØªØ±ÙŠÙƒÙŠ Ù…Ø§Ø²", "author": "Emad", "brewer": "Omni", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=S4l0boQO5zorMo3dcNRjoA%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "A.Almassari / 21g", "author": "soso", "brewer": "Other", "dose": "21g", "ratio": "1:16", "link": "https://share-h5.xbloom.com/?id=S3ELwgw4kdxR2VdMCrXLWA%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "salem | Kit Kat", "author": "Turky", "brewer": "Other", "dose": "23g", "ratio": "1:7", "link": "https://share-h5.xbloom.com/?id=RY07DCdhTuI5c6WmNylrDQ%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ØºØ³ÙŠÙ„ Ø§Ù„ÙÙ„ØªØ± ÙˆØªØ³Ø®ÙŠÙ† Ø§Ù„Ø³ÙŠØ±ÙØ± ÙÙ‚Ø·", "author": "Mohammed", "brewer": "Other", "dose": "12g", "ratio": "1:5", "link": "https://share-h5.xbloom.com/?id=rxI5iCfD40W2nGGRT2Bveg%3D%3D", "temperature": "hot", "category": "server"}, {"name": "15GØ³Ø¹Ø¯", "author": "Ø£Ø¨ÙˆØ¹Ø¨Ø¯Ø§Ù„Ø±Ø­Ù…Ù†", "brewer": "Omni", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=RseBEJ1SPqNCYtRc42A2aQ%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Ø§ÙŠØ³ Ø¯Ø±Ø¨ Ø§Ù„Ù…Ø¹ÙŠÙˆÙˆÙˆÙˆÙ", "author": "Abdullah", "brewer": "Other", "dose": "25g", "ratio": "1:7", "link": "https://share-h5.xbloom.com/?id=rrVVHC9fNZta1OALynKvwQ%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "20 -", "author": "Muneera", "brewer": "Other", "dose": "20g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=Ro4gBFqRFQj7AJa8b8IIXA%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "15G", "author": "Muneera", "brewer": "Omni", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=RO0kBSTUMPTra1FPw8C9oQ%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "mod2", "author": "mod", "brewer": "Other", "dose": "22g", "ratio": "1:8", "link": "https://share-h5.xbloom.com/?id=RnYjWJnqTVg29%2BpoVbTcBw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ÙƒÙˆÙ„Ù…Ø¨ÙŠ Ù…Ø§Ø±ÙŠÙ†Ø² Ù¨Ù¨â€¢", "author": "Emad", "brewer": "xPod", "dose": "15g", "ratio": "1:13", "link": "https://share-h5.xbloom.com/?id=rM2J0Ae7UAo%2Bj64QiIaI8Q%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ÙˆØµÙØ© 15 Ø¬Ø±Ø§Ù… Ø§Ø«ÙŠÙˆØ¨ÙŠ", "author": "Ø£Ø¨ÙˆØ¹Ø¨Ø¯Ø§Ù„Ø±Ø­Ù…Ù†", "brewer": "Omni", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=rkxIuPLkuqxs4hp5qA5wMg%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "AboAseeL 20g | ice coffee", "author": "AbuAljawhara", "brewer": "Other", "dose": "20g", "ratio": "1:7", "link": "https://share-h5.xbloom.com/?id=rK27Q5wjkZhMPZphyTU0KQ%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "ÙƒÙˆØ³ØªØ±ÙŠÙƒØ§", "author": "mf", "brewer": "Other", "dose": "20g", "ratio": "1:14", "link": "https://share-h5.xbloom.com/?id=rcHwLHPS%2FOj810jNZJaI3g%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Gadeb - ORO", "author": "Aziz", "brewer": "xPod", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=RC9IGAQY%2Fd77eT13iqmelg%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Ø§ÙƒØ³ÙŠÙ„Ø³Ùˆ 20", "author": "Ø£Ø¨ÙˆØ¹Ø¨Ø¯Ø§Ù„Ø±Ø­Ù…Ù†", "brewer": "Other", "dose": "20g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=R8EDgdY4dnkaJYszzNthIA%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ØºØ³ÙŠÙ„ Ø§Ù„ÙÙ„ØªØ±", "author": "AMR", "brewer": "Other", "dose": "7g", "ratio": "1:5", "link": "https://share-h5.xbloom.com/?id=r%2BoRJ6zzfCIm9crPBRGl3A%3D%3D", "temperature": "hot", "category": "server"}, {"name": "ice ( test )", "author": "Faisal", "brewer": "Omni", "dose": "15g", "ratio": "1:10", "link": "https://share-h5.xbloom.com/?id=qw8P0CQoGte%2F9EtZwADvAA%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "Ø¹ØªØ§Ø±Ø© | Ø§Ù„ÙŠÙ…Ù† Ù…Ø­Ù…ØµØ© Ø³Ù„ÙˆØ¨", "author": "Abdullah", "brewer": "Other", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=qroTtQRUKiXCrIyJoT8UzA%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Kiffa Roastery", "author": "", "brewer": "xPod", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=qR140y%2BXxyQASeS3DZXImQ%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "surge ice Ø§Ù„Ø«Ù„Ø¬ 150", "author": "Omar", "brewer": "Other", "dose": "15g", "ratio": "1:7", "link": "https://share-h5.xbloom.com/?id=QnD4NfBVSqio5gZZP7HqEA%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "Ø¯ÙŠ ÙƒØ§Ù Ø¨Ù„Ø§Ùƒ Ù†Ø§ÙŠØª", "author": "ABDULLAH", "brewer": "Omni", "dose": "18g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=QK638U0p%2BSsZ3nKptAVdPw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Arriyadh AlShumaisi", "author": "", "brewer": "xPod", "dose": "15g", "ratio": "1:16", "link": "https://share-h5.xbloom.com/?id=qJpIulp30YY0ntE4BDVYVw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "20g Colombia with grind|Aseel", "author": "faisal", "brewer": "Other", "dose": "20g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=Qgrt5AXA6GgZAI%2BvjSVb7A%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "classic", "author": "Abdul", "brewer": "Other", "dose": "20g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=qEuveC5bkKTtpOwc8Xyepg%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "AboAseeL 20g | Ethiopia", "author": "Abdullah", "brewer": "Other", "dose": "20g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=q9WFWqNq3qmQ3E6BfdlE4w%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "shindawa 20g.2", "author": "Turki", "brewer": "Other", "dose": "20g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=Q1JUbEcEc%2Fn6f6Xfrvzmtg%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Black Knight - Adham", "author": "Abdullah", "brewer": "xPod", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=PQ0OFVXJxVQgkhEZevTQlg%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ÙˆØµÙØ© 25", "author": "Muneera", "brewer": "Other", "dose": "25g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=pp7q1iN1FY%2FTYnkC2taRbg%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "4 Pour ice", "author": "Qvsai", "brewer": "Other", "dose": "25g", "ratio": "1:8", "link": "https://share-h5.xbloom.com/?id=PmUeaaFFpGzTzimTVnnA%2Bg%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "Ø´Ù…Ø§Ù… ÙƒÙˆÙ„ÙˆÙ…Ø¨ÙŠ - Ø­Ø§Ø±", "author": "Turky", "brewer": "Other", "dose": "20g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=pkSB6xkhBKOCbDgTF7lGdw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Bait Hameed 25G | Yemen", "author": "Hadeel", "brewer": "Other", "dose": "25g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=p3G6OpLof7tIpptZ89h1Ew%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "High Sweetness ğŸ¯", "author": "Mohammed Ali", "brewer": "Other", "dose": "20g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=P2Cbld7rtCLmDSFWX4sBhA%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ØªÙŠØ§Ù†Ù…Ùˆ Ø§ÙˆÙ„Ø§Ù„Ø§ Ø§Ù„ØµÙŠÙ† Ù„Ø§Ù‡ÙˆØ§Ø¦ÙŠ", "author": "Abdullah", "brewer": "Omni", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=OXjZlsQONUc7mzpTpFjwkw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "IDMI Cost Arica Hacienda", "author": "Bassam", "brewer": "Other", "dose": "20g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=oqPw7EGBc12G1Zs0ySSaYw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Suwaa - Huila", "author": "", "brewer": "xPod", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=oq2fF8MvpSGGcQL3TegrNA%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Ø­ØµÙ† Ø°Ø±ÙˆØ§Ù† | Dhurwan Fort", "author": "BK", "brewer": "Omni", "dose": "18g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=OpDGSeJmcIiE8bWoksPhJw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "A.Almassari / 21g", "author": "A.Almassari", "brewer": "Other", "dose": "21g", "ratio": "1:16", "link": "https://share-h5.xbloom.com/?id=ojzjuIVwQ%2BbnbssroaBa%2BQ%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ÙƒÙˆÙ„Ø¯ Ø¨Ø±Ùˆ", "author": "Ali", "brewer": "Other", "dose": "20g", "ratio": "1:7", "link": "https://share-h5.xbloom.com/?id=OIgZS%2FMQJCieDEl%2FYq3Qgw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Ù¢Ù  Ø¬Ø±Ø§Ù… Ø§ÙˆÙ…Ù†ÙŠ", "author": "Ø£Ø¨ÙˆØ¹Ø¨Ø¯Ø§Ù„Ø±Ø­Ù…Ù†", "brewer": "Other", "dose": "20g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=OfGxwsORs%2Fs23Y%2F3tXXZSA%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ØºØ³ÙŠÙ„ Ø§Ù„ÙÙ„ØªØ± ÙˆØªØ³Ø®ÙŠÙ† Ø§Ù„Ø³ÙŠØ±ÙØ± ÙÙ‚Ø·", "author": "ABH", "brewer": "Other", "dose": "6g", "ratio": "1:5", "link": "https://share-h5.xbloom.com/?id=oa4SpZfbZUzHIc7As9qGSQ%3D%3D", "temperature": "hot", "category": "server"}, {"name": "15g creative recipe", "author": "Khalid Alzeer", "brewer": "xPod", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=O6%2FCxhQAho08imQcgMACDQ%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "soil guji harmony", "author": "Ù…Ø´Ø§Ø±ÙŠ", "brewer": "Other", "dose": "18g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=O11JHNsWS%2BbPAA%2Fwg63lsA%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "abusara7 N", "author": "Abusara7", "brewer": "Other", "dose": "21g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=O%2F9r83o%2BLWqhigz2nMkeOw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Sulalat - Chelechle", "author": "Specialty Hub", "brewer": "xPod", "dose": "15g", "ratio": "1:10", "link": "https://share-h5.xbloom.com/?id=o%2BmPCOTenSNMF4JVd0YcWA%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Ù…Ø°Ù‡Ù„Ø© Ù…Ø­Ù…ØµØ© OYW", "author": "Abdullah", "brewer": "Omni", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=nZwxyoka%2B08oF2YsQ7rCmw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Ø±ÙˆÙ†Ø§Ù„Ø¯Ùˆ | Ronaldo", "author": "BK", "brewer": "Omni", "dose": "18g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=nqRsA7a6SG0u1ETyz%2B9sTw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "AboAseeL 20g | Ethiopia", "author": "AbuAljawhara", "brewer": "Other", "dose": "20g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=nmxMQ8KkAOBzAOXlrIzttw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Ø§Ù„ÙŠÙ…Ù† Ø­Ø±Ø§Ø² Ù…ØµÙ†Ø¹ Ø§Ù„Ù‚Ù‡ÙˆØ© 20g", "author": "ABDULHMEAD", "brewer": "Other", "dose": "20g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=NkxEVNpF348Np7Xmt6t77A%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "12G", "author": "Muneera", "brewer": "Omni", "dose": "12g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=NGgyLAMLhPkojpCCKFWS6w%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ÙƒÙˆØ³ØªØ§Ø±ÙŠÙƒØ§ Ù…Ø§Ø±ÙŠØ§Ø§ Ù…Ø¬ÙÙ", "author": "Fuad Al Zahrani", "brewer": "Omni", "dose": "15g", "ratio": "1:16", "link": "https://share-h5.xbloom.com/?id=nAOckMAjfez7hg2gKaKmHw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ÙˆØµÙØ© 18gØŒ Ù…Ø­Ø§ØµÙŠÙ„ Ø³Ø¹ÙˆØ¯ÙŠØ©ØŒÙŠÙ…Ù†ÙŠØ©", "author": "Fndesign", "brewer": "Omni", "dose": "18g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=MZCo%2B1i1BWok20gfIk09iw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ice 150 ,ğŸ¤”", "author": "Suroor", "brewer": "Other", "dose": "20g", "ratio": "1:7", "link": "https://share-h5.xbloom.com/?id=muoUlB7TBi0126jDex2Q8g%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "18G..", "author": "Muneera", "brewer": "Omni", "dose": "18g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=ms75ZXmJd%2F1aAX22MXUc8g%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "abusara7 N", "author": "Abdullah", "brewer": "Omni", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=MrDp8A6r05H%2Filcq9ULUqQ%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Ø³Ù„ÙØ¯ÙˆØ± ØªØ´Ø§Ø±Ø¬", "author": "Emad", "brewer": "Omni", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=MOzdHIzgBjXUC9PH3mDt%2Fw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Ice Drip25", "author": "ABH", "brewer": "Other", "dose": "20g", "ratio": "1:8", "link": "https://share-h5.xbloom.com/?id=MLQuyuC47BcmoF0TETd%2FRg%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "16g..", "author": "Muneera", "brewer": "Omni", "dose": "16g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=MJvMMfjOKW2rnN9Vp9ePag%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Ø§Ø«ÙŠÙˆØ¨ÙŠ Ù…Ø§Ø²", "author": "Khaled", "brewer": "xPod", "dose": "15g", "ratio": "1:14", "link": "https://share-h5.xbloom.com/?id=MiUvxFcQpofP1QuSy%2FOG%2FA%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Ø´ÙŠÙ„Ø³Ù„ÙŠ Ø³Ù„Ø§Ù„Ø§Øª Ù¡Ù¥ Ø¬", "author": "ÙŠÙˆØ³Ù Ø§Ù„Ø¹Ù…ÙŠØ±ÙŠ", "brewer": "Other", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=mIGxr%2FiFpnlnp3ZHfIm8sw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "A", "author": "Ali", "brewer": "Other", "dose": "20g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=Ma%2F16weQvbNEYspvJnUP8Q%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ÙØ±Ø§ÙˆÙ„Ø© Ø±ÙˆÙ„ Ø¨Ø§Ø±Ø¯Ù¡Ù¥Ø¬ Ù…ØµÙ†Ø¹ Ø§Ù„Ù‚Ù‡ÙˆØ©", "author": "ABDULHMEAD", "brewer": "Omni", "dose": "15g", "ratio": "1:11", "link": "https://share-h5.xbloom.com/?id=m5sehtkocFgl%2BDDSPpzV4g%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "Soil - Guji", "author": "Specialty Hub", "brewer": "xPod", "dose": "15g", "ratio": "1:10", "link": "https://share-h5.xbloom.com/?id=m5m39U5SDhRF%2FjdM3KSS9w%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "natural fermentation beansğŸ§Š", "author": "SA", "brewer": "Omni", "dose": "15g", "ratio": "1:8", "link": "https://share-h5.xbloom.com/?id=m58xceXg5UrJsyNVPWyW4w%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "The big barista", "author": "Omar", "brewer": "Omni", "dose": "18g", "ratio": "1:14", "link": "https://share-h5.xbloom.com/?id=M0uoZlDb%2FzGllFJIW7l1dg%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "slope", "author": "Muneera", "brewer": "Other", "dose": "20g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=LYYQlew9ndISEZf8wRs8Jw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Ù…Ø§Ù†Ø§Ù†Ø§Ø³ÙŠ Oro", "author": "Ali", "brewer": "Omni", "dose": "18g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=luleqEawHeVg7e7Ux16gtQ%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "SOIL. GUJI", "author": "soil", "brewer": "xPod", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=lqY24uVRMPoqTVpgsFwQAg%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "BlackSip Watermelon Cold", "author": "ahmad", "brewer": "Other", "dose": "20g", "ratio": "1:8", "link": "https://share-h5.xbloom.com/?id=lpPQuDvmXkvJIGQzB%2B5T3w%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "ØºØ³ÙŠÙ„", "author": "Turky", "brewer": "Other", "dose": "10g", "ratio": "1:7", "link": "https://share-h5.xbloom.com/?id=lpDriV6DNu6Ohf4tT1Dl6g%3D%3D", "temperature": "hot", "category": "server"}, {"name": "ÙˆØµÙÙ‡ 15 ØºØ±Ø§Ù…", "author": "Ghazi", "brewer": "Omni", "dose": "15g", "ratio": "1:16", "link": "https://share-h5.xbloom.com/?id=LDyP1OcWT3hZcCX12nrUuQ%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "20g Colombia 180 ice", "author": "M", "brewer": "Other", "dose": "20g", "ratio": "1:9", "link": "https://share-h5.xbloom.com/?id=lDMV3jgrCYmJ%2FgsTy4gkxg%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "KAMAL 9x", "author": "KAMAL ALRAWHANI", "brewer": "Omni", "dose": "18g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=L0eCSa9l5EqPjPCjIYPhsQ%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ØªØ¬Ø±Ø¨Ø© Ø´ÙŠØ® Ø§Ù„Ø¨Ø§Ø±Ø¯Ø©", "author": "Hider Ali", "brewer": "Omni", "dose": "15g", "ratio": "1:11", "link": "https://share-h5.xbloom.com/?id=KZXMjL2SZE9yixHcUBvwyw%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "Ù¤ ØµØ¨Ø§Øª Ø·Ø­Ù† Ø³ÙˆÙŠÙ„ Ø´ÙŠÙ„Ø´Ù„ÙŠ 15 Ø¬", "author": "Abdullah", "brewer": "Other", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=kzABcLIfs1ctHatV%2F%2BiBHg%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "faisal younis Xpods 6T", "author": "SHADDAD", "brewer": "xPod", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=KycHhRpushnbcgYMMJZ88Q%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ice coffee", "author": "Ali", "brewer": "Other", "dose": "20g", "ratio": "1:7", "link": "https://share-h5.xbloom.com/?id=krOsQGpAjwfHTFmefJwwdg%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "AboAseeL 20g | ice coffee", "author": "faisal", "brewer": "Other", "dose": "20g", "ratio": "1:7", "link": "https://share-h5.xbloom.com/?id=kqQR5FxHNFb4MdWjxcFA3w%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "M.15", "author": "Muneera", "brewer": "Omni", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=kOmewFPhoLTkrtXW7N6MMQ%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "15g - Fruit", "author": "Abdulaziz", "brewer": "Omni", "dose": "15g", "ratio": "1:17", "link": "https://share-h5.xbloom.com/?id=kMQtPOJa%2FTrz7eZkIYxwRQ%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "22;", "author": "Muneera", "brewer": "Other", "dose": "22g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=Kj2JFoQUy1608RbhmPyTow%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "GPT - Al-Shumaisi 15g", "author": "Abdullah", "brewer": "Omni", "dose": "15g", "ratio": "1:16", "link": "https://share-h5.xbloom.com/?id=kESyUeduhUKXITEVUV5cjA%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "18G", "author": "Muneera", "brewer": "Omni", "dose": "18g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=kdAQr03Tk1s0ecmNa16KIg%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "AboAseeL 20g | Ethiopia", "author": "Hadeel", "brewer": "Other", "dose": "20g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=kC8lnveKhEf5FpwsQ4OF5g%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ØªÙŠØ§Ù†Ù…Ùˆ Ø§ÙˆÙ„Ø§Ù„Ø§ 15g Ø¨Ø§Ø±Ø¯", "author": "Abdullah", "brewer": "Omni", "dose": "15g", "ratio": "1:10", "link": "https://share-h5.xbloom.com/?id=kBRNMiiYtKl8KCZUiwfrNw%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "ÙˆØµÙØ© Ù…Ø¹ØªÙ…Ø¯Ø© 15 ğŸ’›ğŸ’›", "author": "ÙŠÙˆØ³Ù Ø§Ù„Ø¹Ù…ÙŠØ±ÙŠ", "brewer": "Other", "dose": "15g", "ratio": "1:16", "link": "https://share-h5.xbloom.com/?id=K3Kib2OPjfUUQU1npdCeKg%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Classic Ice Drip", "author": "Abdul", "brewer": "Other", "dose": "20g", "ratio": "1:9", "link": "https://share-h5.xbloom.com/?id=K1rdIPRbzYcvqtRm4YmZdw%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "Seen 19g ğŸ’³ Ø§Ø«ÙŠÙˆØ¨ÙŠ", "author": "khaled", "brewer": "Omni", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=jzeV0rmlZfrWP8A5OU14JQ%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Ø¯ÙŠØ§Ø±", "author": "Emad", "brewer": "xPod", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=jXAKonLop3xpfWyYnjy8og%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Black Night", "author": "Turky", "brewer": "Omni", "dose": "15g", "ratio": "1:16", "link": "https://share-h5.xbloom.com/?id=JPuE66m4y%2FDnIeLuR%2FnDJw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "A", "author": "Waleed Alotaibi", "brewer": "Other", "dose": "20g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=JnZLkfjbHXo2uNv0ei5QKg%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "15GØ³Ø¹Ø¯", "author": "Ù…Ø­Ù…Ø¯", "brewer": "Omni", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=jg9yDcT52MJUBloUF8fwRw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "AboAseeL 20g | ice coffee", "author": "Mohammad", "brewer": "Other", "dose": "20g", "ratio": "1:7", "link": "https://share-h5.xbloom.com/?id=JFrvKOFkK0JeNEdL%2FwPRAw%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "Ø¨Ù„Ø§Ùƒ Ù†Ø§ÙŠØª Ø®ÙˆØ® 170 Ù‚Ø±Ø§Ù… Ø«Ù„Ø¬", "author": "sloom", "brewer": "Other", "dose": "25g", "ratio": "1:7", "link": "https://share-h5.xbloom.com/?id=Jesju4Jr%2F3ZKEP2OII6vlw%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "iesss", "author": "Abdulmailk", "brewer": "Omni", "dose": "18g", "ratio": "1:10", "link": "https://share-h5.xbloom.com/?id=JegxlZmzRaFtBkWCpfCGSQ%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ÙˆØµÙØªÙŠ Ø§Ù„Ø®Ø§ØµÙ‡ Ø±Ù‚Ù… 2", "author": "Bader", "brewer": "Omni", "dose": "18g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=jdQZImafA%2B5R7npRet3RjQ%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Ø§Ù„Ø¥ÙŠØ­Ø§Ø¡Ø§Øª", "author": "abdullah aqil", "brewer": "Omni", "dose": "15g", "ratio": "1:17", "link": "https://share-h5.xbloom.com/?id=JC%2BL0uxKaHadpm4yI%2BNE1Q%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ÙÙŠØµÙ„ ÙŠÙˆÙ†Ø³ - ÙƒØ¨ÙŠØ±", "author": "MF", "brewer": "Other", "dose": "22g", "ratio": "1:16", "link": "https://share-h5.xbloom.com/?id=jA5ZTA%2FZAXQE2Le3OTrP9Q%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ÙˆØµÙÙ‡ 15 ØºØ±Ø§Ù…", "author": "Ali", "brewer": "Omni", "dose": "15g", "ratio": "1:16", "link": "https://share-h5.xbloom.com/?id=j%2BvT14%2F%2Blm4V%2FG4KFDODjA%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Ø¨Ø§Ø±Ø¯ Ù¡Ù¥Ù  Ø«Ù„Ø¬ Ù¢Ù  Ø¬", "author": "Majed", "brewer": "Other", "dose": "20g", "ratio": "1:6", "link": "https://share-h5.xbloom.com/?id=iZk4tg1P9vfTHdiipcD%2BxQ%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "RICARDO . trivali , Ice 20g", "author": "Ø¹Ø§Ø¦Ø¶ Ø§Ù„Ø¹ØªÙŠØ¨ÙŠ", "brewer": "Other", "dose": "21g", "ratio": "1:7", "link": "https://share-h5.xbloom.com/?id=IwAkBhJcWbAtfjn61iOzAQ%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "Arriyadh - AlShumaisi", "author": "Specialty Hub", "brewer": "xPod", "dose": "15g", "ratio": "1:16", "link": "https://share-h5.xbloom.com/?id=iQXZKyfZZWZ3qJ9%2B21K%2FVw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ice drip - Ø§Ù„Ø«Ù„Ø¬ 100 Ù‚Ø±Ø§Ù…", "author": "Muneera", "brewer": "Other", "dose": "20g", "ratio": "1:7", "link": "https://share-h5.xbloom.com/?id=ILsCz3GN6Htr1DFtSzNCZg%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "Abla Roastery 20g Ethiopia4", "author": "Hadeel", "brewer": "Other", "dose": "20g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=iKDcCuViwydHfN%2FIqtYQmA%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ice Yameine", "author": "Aziz's", "brewer": "Omni", "dose": "18g", "ratio": "1:8", "link": "https://share-h5.xbloom.com/?id=ij3jO13xQqrFgA3bCI%2FBPA%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "ğŸ˜´ğŸ˜´", "author": "Khalifa", "brewer": "Omni", "dose": "15g", "ratio": "1:17", "link": "https://share-h5.xbloom.com/?id=IHjPVu5J%2B01j3fzeQOVyCQ%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ice drip 17g", "author": "Reem", "brewer": "Omni", "dose": "17g", "ratio": "1:9", "link": "https://share-h5.xbloom.com/?id=IAGy8o8CWc5qNNgU4gOscA%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "117 Ø«Ù„Ø¬", "author": "Bandar", "brewer": "Other", "dose": "18g", "ratio": "1:6", "link": "https://share-h5.xbloom.com/?id=I0sRNKzn1nKNnpz5%2BjYmNg%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "El Silvador Norah", "author": "Abdullah", "brewer": "Omni", "dose": "18g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=I%2FzKG70N%2Fedg9D2sfIopxQ%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Ù‚ÙˆØªÙ‡ Ø³Ù„ÙØ§Ø¯ÙˆØ± ØªÙˆØ±ÙˆÙ„Ø§ Ù…ØºØ³ÙˆÙ„ Ø­Ø§Ø±", "author": "Yousef Alharbi", "brewer": "Other", "dose": "20g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=HPMYy0G1q4y2cTjKm6Hplw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "Coffee of The Day", "author": "", "brewer": "xPod", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=HpMXbY5K4tGRV39vvAIJMw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "ÙˆØµÙØ© Ù„Ø§Ù…Ø§ - Ø«Ù„Ø¬ 100", "author": "Muneera", "brewer": "Other", "dose": "15g", "ratio": "1:7", "link": "https://share-h5.xbloom.com/?id=Hn3COMgKN9n5Ic1alSNleQ%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "kiffa", "author": "Khalid Alzeer", "brewer": "xPod", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=HLVun57Owy9mIGO8xKYJ0A%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "iced qayel ali - Ø®Ø§Ù„Ø¯", "author": "KHALED", "brewer": "Omni", "dose": "18g", "ratio": "1:10", "link": "https://share-h5.xbloom.com/?id=HIHXWqBzA45ruB7f0B%2FzBA%3D%3D", "temperature": "cold", "category": "cold"}, {"name": "30 Ù‚Ø±Ø§Ù…", "author": "Muneera", "brewer": "Other", "dose": "25g", "ratio": "1:18", "link": "https://share-h5.xbloom.com/?id=h2jb7hWx9N6HUsaCAVf5jQ%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "15pod", "author": "Muneera", "brewer": "xPod", "dose": "15g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=GsjfvzgF8eWPdtEjfWBjsw%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "GADEB ORO BY Noura.ja", "author": "Nourah", "brewer": "Other", "dose": "20g", "ratio": "1:15", "link": "https://share-h5.xbloom.com/?id=GkOQiqyJTmUls1v1XNDZjg%3D%3D", "temperature": "hot", "category": "hot"}, {"name": "25grams", "author": "Muneera", "brewer": "Other", "dose": "25g", "ratio": "1:16", "link": "https://share-h5.xbloom.com/?id=gJAP695CaWbNxZxkMcLQGA%3D%3D", "temperature": "hot", "category": "hot"}];
const CKW=['Ø¨Ø§Ø±Ø¯','Ø«Ù„Ø¬','ice','ğŸ§Š','iced','Ø§Ù„Ø«Ù„Ø¬','cold','Ø¨Ø§Ø±Ø¯Ø©','Ù…Ø«Ù„Ø¬','Ø¨Ø§Ø±Ø¯Ù‡','Ù…Ø«Ù„Ø¬Ø©','Ù…Ø«Ù„Ø¬Ù‡'];
const SKW=['ØºØ³ÙŠÙ„','ØªØ±Ø·ÙŠØ¨','Ø³ÙŠØ±ÙØ±','ØºØ³Ù„','server','cleaning','wash'];
let RR=[],FAV=new Set(),BREW={},RATINGS={},USER_RATINGS={};
let SORT='default';
let fTemp='all',fBrew='all',Q='',PAGE=1,PP=24;
function str(v){return v==null?'':String(v);}
function esc(s){return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');}
function setEl(id,v){const el=document.getElementById(id);if(el)el.textContent=v;}
function hasSKW(t){return SKW.some(k=>t.includes(k));}
function hasCKW(t){return CKW.some(k=>t.includes(k));}
function ensureCat(r){if(!r.category){const t=(str(r.name)+' '+str(r.author)).toLowerCase();r.category=hasSKW(t)?'server':hasCKW(t)?'cold':'hot';}return r;}
function loadLocal(){
  try{FAV=new Set(JSON.parse(localStorage.getItem('xbf')||'[]'));}catch(e){FAV=new Set();}
  try{BREW=JSON.parse(localStorage.getItem('xbb')||'{}');}catch(e){BREW={};}
  try{USER_RATINGS=JSON.parse(localStorage.getItem('xbur')||'{}');}catch(e){USER_RATINGS={};}
}
function saveLocal(){
  try{localStorage.setItem('xbf',JSON.stringify([...FAV]))}catch(e){}
  try{localStorage.setItem('xbb',JSON.stringify(BREW))}catch(e){}
  try{localStorage.setItem('xbur',JSON.stringify(USER_RATINGS))}catch(e){}
}
function toast(msg){const t=document.getElementById('toast');t.textContent=msg;t.className='toast tok show';setTimeout(()=>t.classList.remove('show'),2800);}
function mergeData(fbList){
  const fbLinks=new Set(fbList.map(r=>r.link));
  const init=JSON.parse(JSON.stringify(INIT)).filter(r=>!fbLinks.has(r.link));
  init.forEach(ensureCat);
  RR=fbList.concat(init);
  loadLocal();updateCounts();render();
}
function updateCounts(){
  let t=RR.length,h=0,c=0,s=0,o=0,x=0,ot=0;
  RR.forEach(r=>{const cat=r.category||'hot',b=r.brewer||'';
    if(cat==='hot')h++;else if(cat==='cold')c++;else s++;
    if(b==='Omni')o++;else if(b==='xPod')x++;else ot++;});
  setEl('nAll',t);setEl('nHot',h);setEl('nCold',c);setEl('nSrv',s);
  setEl('bAll',t);setEl('bOmni',o);setEl('bXPod',x);setEl('bOther',ot);
  setEl('fcount','Ø§Ù„ÙˆØµÙØ§Øª: '+t);
}
window.setSort=function(s,btn){
  SORT=s;
  document.querySelectorAll('.sort-tab').forEach(b=>b.classList.remove('on'));
  btn.classList.add('on');
  PAGE=1;render();
};
window.setF=function(type,val,btn){
  if(type==='temp'){fTemp=val;document.getElementById('tempG').querySelectorAll('.ftab').forEach(b=>b.classList.remove('on'));}
  else{fBrew=val;document.getElementById('brewG').querySelectorAll('.ftab').forEach(b=>b.classList.remove('on'));}
  btn.classList.add('on');PAGE=1;render();
};
window.setPP=function(v){PP=parseInt(v);PAGE=1;render();};
window.goPage=function(p){PAGE=p;render();window.scrollTo({top:0,behavior:'smooth'});};
function getList(){
  let list=RR.filter(r=>{
    if(fTemp!=='all'&&(r.category||'hot')!==fTemp)return false;
    if(fBrew!=='all'&&(r.brewer||'')!==fBrew)return false;
    if(Q){const t=(str(r.name)+' '+str(r.author)+' '+str(r.dose)+' '+str(r.ratio)).toLowerCase();if(!t.includes(Q))return false;}
    return true;
  });
  if(SORT==='top'){
    list.sort((a,b)=>{
      const ra=RATINGS[ratingKey(a.link)]||{total:0,count:0};
      const rb=RATINGS[ratingKey(b.link)]||{total:0,count:0};
      const avgA=ra.count>0?ra.total/ra.count:0;
      const avgB=rb.count>0?rb.total/rb.count:0;
      // ØªØ±ØªÙŠØ¨: Ø£Ø¹Ù„Ù‰ Ù…ØªÙˆØ³Ø· Ø£ÙˆÙ„Ø§Ù‹ØŒ ÙˆØ¹Ù†Ø¯ Ø§Ù„ØªØ¹Ø§Ø¯Ù„ Ø§Ù„Ø£ÙƒØ«Ø± ØªÙ‚ÙŠÙŠÙ…Ø§Ù‹ Ø£ÙˆÙ„Ø§Ù‹
      if(avgB!==avgA)return avgB-avgA;
      return rb.count-ra.count;
    });
  } else if(SORT==='newest'){
    list.sort((a,b)=>(b.addedAt||0)-(a.addedAt||0));
  } else if(SORT==='oldest'){
    list.sort((a,b)=>(a.addedAt||0)-(b.addedAt||0));
  }
  return list;
}
function render(){
  const list=getList();const grid=document.getElementById('grid');
  if(!list.length){grid.innerHTML='<div class="empty"><h2>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬</h2><p style="color:var(--t2)">Ø¬Ø±Ù‘Ø¨ ØªØºÙŠÙŠØ± Ø§Ù„ÙÙ„ØªØ± Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ø¨Ø­Ø«</p></div>';document.getElementById('pgn').innerHTML='';document.getElementById('ppinfo').innerHTML='Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬';return;}
  const total=Math.ceil(list.length/PP);if(PAGE>total)PAGE=total;
  const s=(PAGE-1)*PP,e=Math.min(s+PP,list.length),slice=list.slice(s,e);
  document.getElementById('ppinfo').innerHTML='Ø¹Ø±Ø¶ <b>'+(s+1)+'-'+e+'</b> Ù…Ù† <b>'+list.length+'</b>';
  grid.innerHTML=slice.map((r,i)=>cardHTML(r,i)).join('');
  renderPgn(total);
}
function cardHTML(r,i){
  const idx=RR.indexOf(r),isFav=FAV.has(r.link);
  const cat=r.category||'hot',bTag=r.brewer==='Omni'?'to':r.brewer==='xPod'?'tx':'tth';
  const cTag=cat==='cold'?'tc':cat==='server'?'ts':'th';
  const cLbl=cat==='cold'?'Ø¨Ø§Ø±Ø¯ ğŸ§Š':cat==='server'?'ØºØ³ÙŠÙ„ ÙˆØªØ±Ø·ÙŠØ¨ Ø³ÙŠØ±ÙØ±':'Ø­Ø§Ø± ğŸ”¥';
  const rKey=ratingKey(r.link);
  const rd=RATINGS[rKey]||{total:0,count:0};
  const avg=rd.count>0?rd.total/rd.count:0;
  const myRating=USER_RATINGS[rKey]||0;
  let stars='';
  for(let s=1;s<=5;s++){
    const filled=s<=Math.round(avg);
    stars+=`<span class="star ${filled?'son':'soff'}" data-s="${s}" data-idx="${idx}" data-key="${rKey}"
      onmouseover="hoverStars(this,${s})"
      onmouseout="unhoverStars(this,${idx},${rKey})"
      onclick="rate('${rKey}',${s},${idx})">â­</span>`;
  }
  return `<div class="card ani" style="animation-delay:${Math.min(i*0.04,.5)}s">
    <div class="ch"><h3 class="cn">${esc(str(r.name))}</h3>
    <div class="cicos">
      <div class="ib${isFav?' fav':''}" onclick="toggleFav(${idx})">${isFav?'ğŸ’™':'ğŸ¤'}</div>
      <div class="ib" onclick="shareR(${idx})">ğŸ”—</div>
    </div></div>
    ${str(r.author)?`<div class="cauth">Ø¨ÙˆØ§Ø³Ø·Ø© ${esc(str(r.author))}</div>`:''}
    <div class="ctags"><span class="tag ${bTag}">${esc(str(r.brewer))}</span><span class="tag ${cTag}">${cLbl}</span></div>
    <div class="cdets">
      <div class="det"><span class="dl">Ø§Ù„Ø¬Ø±Ø¹Ø©</span><span class="dv">${esc(str(r.dose))}</span></div>
      ${str(r.ratio)?`<div class="det"><span class="dl">Ø§Ù„Ù†Ø³Ø¨Ø©</span><span class="dv">${esc(str(r.ratio))}</span></div>`:''}
    </div>
    <div class="rating-wrap">
      <div class="cstars" id="stars-${idx}">${stars}</div>
      <div class="rinfo">
        ${avg>0?`<span class="ravg">${avg.toFixed(1)} â­</span><span class="rcnt">${rd.count} ØªÙ‚ÙŠÙŠÙ…</span>`:'<span class="rcnt" style="font-size:.75em">ÙƒÙ† Ø£ÙˆÙ„ Ù…Ù† ÙŠÙ‚ÙŠÙ‘Ù…</span>'}
        ${myRating?`<span class="rmine">Ù‚ÙŠÙ‘Ù…ØªÙ‡Ø§ ${myRating}â­</span>`:''}
      </div>
    </div>
    <div class="cacts"><a href="${r.link||'#'}" target="_blank" class="btn bp bbl bsm">ÙØªØ­ Ø§Ù„ÙˆØµÙØ© ÙÙŠ xBloom</a></div>
    <div class="comments-section">
      <button class="comments-toggle" onclick="toggleComments('${rKey}',this)">
        ğŸ’¬ <span id="ccount-${rKey}">Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª</span>
      </button>
      <div class="comments-box" id="cbox-${rKey}">
        ${myRating===0?'<div class="rating-required-hint">â­ ÙŠØ¬Ø¨ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø£ÙˆÙ„Ø§Ù‹ Ù‚Ø¨Ù„ ÙƒØªØ§Ø¨Ø© ØªØ¹Ù„ÙŠÙ‚</div>':''}
        <div style="margin-bottom:10px">
          <div class="stars-select" id="cstars-${rKey}">
            ${[1,2,3,4,5].map(n=>`<span class="star-sel ${myRating>=n?'active':''}" onclick="selectCommentStar('${rKey}',${n})" title="${n} Ù†Ø¬ÙˆÙ…">â­</span>`).join('')}
          </div>
          <textarea class="comment-textarea" id="ctxt-${rKey}" placeholder="${myRating===0?'Ù‚ÙŠÙ‘Ù… Ø§Ù„ÙˆØµÙØ© Ø£ÙˆÙ„Ø§Ù‹ Ø¨Ø§Ù„Ù†Ø¬ÙˆÙ… Ø£Ø¹Ù„Ø§Ù‡':'Ø§ÙƒØªØ¨ ØªØ¹Ù„ÙŠÙ‚Ùƒ Ù‡Ù†Ø§...'}" ${myRating===0?'disabled':''}></textarea>
          <button class="comment-submit" onclick="submitComment('${rKey}')" id="csub-${rKey}" ${myRating===0?'disabled':''}>
            âœ‰ï¸ Ù†Ø´Ø± Ø§Ù„ØªØ¹Ù„ÙŠÙ‚
          </button>
        </div>
        <div class="comments-list" id="clist-${rKey}">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
      </div>
    </div>
  </div>`;
}
function renderPgn(total){
  const c=document.getElementById('pgn');if(total<=1){c.innerHTML='';return;}
  let h=`<button class="pb" ${PAGE===1?'disabled':''} onclick="goPage(${PAGE-1})">&#x2039;</button>`;
  if(total<=7){for(let i=1;i<=total;i++)h+=`<button class="pb${i===PAGE?' on':''}" onclick="goPage(${i})">${i}</button>`;}
  else{
    h+=`<button class="pb${PAGE===1?' on':''}" onclick="goPage(1)">1</button>`;
    if(PAGE>3)h+='<span class="dots">...</span>';
    for(let i=Math.max(2,PAGE-1);i<=Math.min(total-1,PAGE+1);i++)h+=`<button class="pb${i===PAGE?' on':''}" onclick="goPage(${i})">${i}</button>`;
    if(PAGE<total-2)h+='<span class="dots">...</span>';
    h+=`<button class="pb${PAGE===total?' on':''}" onclick="goPage(${total})">${total}</button>`;
  }
  h+=`<button class="pb" ${PAGE===total?'disabled':''} onclick="goPage(${PAGE+1})">&#x203A;</button>`;
  c.innerHTML=h;
}
// â•â•â•â• RATING KEY â•â•â•â•
function ratingKey(link){
  try{return btoa(unescape(encodeURIComponent(link))).replace(/\+/g,'-').replace(/\//g,'_').replace(/=/g,'');}
  catch(e){return 'k'+Math.abs([...link].reduce((a,c)=>a*31+c.charCodeAt(0)|0,0));}
}

// â•â•â•â• HOVER STARS â•â•â•â•
window.hoverStars=function(el,s){
  const wrap=el.parentElement;
  wrap.querySelectorAll('.star').forEach((star,i)=>{
    if(i<s){star.classList.add('shov');star.classList.remove('soff');}
    else{star.classList.remove('shov');}
  });
};
window.unhoverStars=function(el,idx){
  const link=RR[idx]?.link;
  const rKey=link?ratingKey(link):'';
  const rd=RATINGS[rKey]||{total:0,count:0};
  const avg=rd.count>0?rd.total/rd.count:0;
  const wrap=el.parentElement;
  wrap.querySelectorAll('.star').forEach((star,i)=>{
    star.classList.remove('shov');
    if(i<Math.round(avg)){star.classList.add('son');star.classList.remove('soff');}
    else{star.classList.add('soff');star.classList.remove('son');}
  });
};

// â•â•â•â• RATE (Firebase Transaction) â•â•â•â•
window.rate=function(rKey,s,idx){
  if(USER_RATINGS[rKey]){
    toast('Ù‚ÙŠÙ‘Ù…ØªÙ‡Ø§ Ù…Ù† Ù‚Ø¨Ù„ Ø¨Ù€ '+USER_RATINGS[rKey]+'â­','terr');
    return;
  }
  // Optimistic UI
  USER_RATINGS[rKey]=s;
  saveLocal();
  // Update card immediately
  const starsWrap=document.getElementById('stars-'+idx);
  if(starsWrap){
    starsWrap.querySelectorAll('.star').forEach((star,i)=>{
      star.classList.toggle('son',i<s);
      star.classList.toggle('soff',i>=s);
      if(i===s-1){star.classList.add('rated-mine');setTimeout(()=>star.classList.remove('rated-mine'),400);}
    });
  }
  toast(s+'â­ Ø´ÙƒØ±Ø§Ù‹ Ø¹Ù„Ù‰ ØªÙ‚ÙŠÙŠÙ…Ùƒ!');
  // Firebase transaction
  const rRef=ref(db,'ratings/'+rKey);
  runTransaction(rRef,current=>{
    if(current===null) return {total:s,count:1};
    return {total:(current.total||0)+s, count:(current.count||0)+1};
  }).then(()=>{
    // onValue will re-render automatically
  }).catch(err=>{
    // revert on fail
    delete USER_RATINGS[rKey];
    saveLocal();
    toast('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ÙØ¸','terr');
  });
};

window.toggleFav=function(idx){const link=RR[idx].link;if(FAV.has(link)){FAV.delete(link);toast('ØªÙ… Ø§Ù„Ø¥Ø²Ø§Ù„Ø©');}else{FAV.add(link);toast('Ø£Ø¶ÙŠÙØª Ù„Ù„Ù…ÙØ¶Ù„Ø© ğŸ’™');}saveLocal();render();};
window.shareR=function(idx){const link=RR[idx].link;if(navigator.share)navigator.share({title:'ÙˆØµÙØ© xBloom',url:link}).catch(()=>{});else{navigator.clipboard.writeText(link);toast('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· ğŸ”—');}};

// â•â•â•â• SITE SETTINGS LOADER â•â•â•â•
const settingsRef2 = ref(db, 'siteSettings');
const commentsRef2 = ref(db, 'comments');

onValue(settingsRef2, snap => {
  const s = snap.val() || {};
  
  // Announcement bar
  const bar = document.getElementById('annoBar');
  if(s.annoEnabled && s.annoText) {
    document.getElementById('annoText').textContent = s.annoText;
    bar.className = 'anno-bar show ' + (s.annoType || 'info');
  } else {
    bar.classList.remove('show');
  }
  
  // Promo ticker
  const ticker = document.getElementById('promoTicker');
  const tickerInner = document.getElementById('promoTickerInner');
  if(s.promoBarEnabled && s.promoCodes && s.promoCodes.length) {
    const items = [...s.promoCodes, ...s.promoCodes].map(p =>
      `<span class="promo-item">ğŸ« <strong>${esc(String(p.name))}</strong>: <span class="promo-item-code">${esc(String(p.code))}</span> ${p.desc ? 'â€” '+esc(String(p.desc)) : ''}</span>`
    ).join('');
    tickerInner.innerHTML = items;
    ticker.classList.add('show');
  } else {
    ticker.classList.remove('show');
  }
  
  // Footer
  if(s.footerCopy) document.getElementById('footerCopy').textContent = s.footerCopy;
  if(s.footerSub) document.getElementById('footerSub').textContent = s.footerSub;
  if(s.footerDev) document.getElementById('footerDev').textContent = s.footerDev;
  
  // Site title
  if(s.siteTitle) document.title = s.siteTitle;
  if(s.siteSubtitle) { const el=document.querySelector('.sub'); if(el) el.textContent=s.siteSubtitle; }
  
  // AdSense injection
  const adsTop = document.getElementById('adsTopContainer');
  if(s.adsEnabled && s.adsCode) {
    if(s.adsPosition === 'top' || !s.adsPosition) {
      adsTop.innerHTML = s.adsCode;
      // Execute scripts
      adsTop.querySelectorAll('script').forEach(old => {
        const s2 = document.createElement('script');
        s2.textContent = old.textContent;
        [...old.attributes].forEach(a => s2.setAttribute(a.name, a.value));
        old.parentNode.replaceChild(s2, old);
      });
    }
  } else {
    adsTop.innerHTML = '';
  }
  
  // Pinned recipes
  const pinnedBanner = document.getElementById('pinnedBanner');
  const pinnedGrid = document.getElementById('pinnedGrid');
  if(s.pinnedRecipes && s.pinnedRecipes.length) {
    pinnedBanner.style.display = 'block';
    pinnedGrid.innerHTML = s.pinnedRecipes.map((r, i) => {
      const rKey = ratingKey(r.link || '');
      const rd = RATINGS[rKey] || {total:0,count:0};
      const avg = rd.count > 0 ? rd.total/rd.count : 0;
      const cat = r.category || 'hot';
      const cLbl = cat==='cold'?'Ø¨Ø§Ø±Ø¯ ğŸ§Š':cat==='server'?'ØºØ³ÙŠÙ„':'Ø­Ø§Ø± ğŸ”¥';
      const bTag = r.brewer==='Omni'?'to':r.brewer==='xPod'?'tx':'tth';
      const cTag = cat==='cold'?'tc':cat==='server'?'ts':'th';
      return `<div class="card card-pinned ani">
        <div class="pinned-badge">ğŸ“Œ Ù…Ø«Ø¨ØªØ©</div>
        <div class="ch"><h3 class="cn">${esc(String(r.name||''))}</h3></div>
        ${r.author ? `<div class="cauth">Ø¨ÙˆØ§Ø³Ø·Ø© ${esc(String(r.author))}</div>` : ''}
        <div class="ctags"><span class="tag ${bTag}">${esc(String(r.brewer||''))}</span><span class="tag ${cTag}">${cLbl}</span></div>
        ${avg>0?`<div class="rinfo" style="justify-content:center;margin-bottom:10px"><span class="ravg">${avg.toFixed(1)} â­</span><span class="rcnt">${rd.count} ØªÙ‚ÙŠÙŠÙ…</span></div>`:''}
        <div class="cacts"><a href="${r.link||'#'}" target="_blank" class="btn bp bbl bsm">ÙØªØ­ Ø§Ù„ÙˆØµÙØ© ÙÙŠ xBloom</a></div>
      </div>`;
    }).join('');
  } else {
    pinnedBanner.style.display = 'none';
  }
}, err => { console.warn('settings:', err); });

// â•â•â•â• COMMENTS SYSTEM â•â•â•â•
let COMMENTS = {};
let COMMENT_RATINGS = {}; // per-recipe selected star for comment

onValue(commentsRef2, snap => {
  COMMENTS = {};
  snap.forEach(child => { COMMENTS[child.key] = child.val(); });
  // Update comment counts in open boxes
  Object.keys(COMMENTS).forEach(rKey => {
    const cnt = document.getElementById('ccount-' + rKey);
    if(cnt) {
      const n = Object.keys(COMMENTS[rKey] || {}).length;
      cnt.textContent = 'ğŸ’¬ ' + n + ' ØªØ¹Ù„ÙŠÙ‚';
    }
    const clist = document.getElementById('clist-' + rKey);
    if(clist) renderCommentList(rKey, clist);
  });
}, err => { console.warn('comments:', err); });

window.toggleComments = function(rKey, btn) {
  const box = document.getElementById('cbox-' + rKey);
  const isOpen = box.classList.contains('open');
  box.classList.toggle('open', !isOpen);
  if(!isOpen) {
    // render comments
    const clist = document.getElementById('clist-' + rKey);
    if(clist) renderCommentList(rKey, clist);
    // Update count
    const n = Object.keys(COMMENTS[rKey] || {}).length;
    document.getElementById('ccount-' + rKey).textContent = 'ğŸ’¬ ' + n + ' ØªØ¹Ù„ÙŠÙ‚';
  }
};

function renderCommentList(rKey, container) {
  const items = COMMENTS[rKey] || {};
  const arr = Object.values(items).filter(c => c && c.text);
  arr.sort((a,b) => (b.createdAt||0) - (a.createdAt||0));
  if(!arr.length) { container.innerHTML = '<p style="color:var(--t2);font-size:.82em;text-align:center;padding:8px">Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø¨Ø¹Ø¯ â€” ÙƒÙ† Ø§Ù„Ø£ÙˆÙ„!</p>'; return; }
  container.innerHTML = arr.map(c => {
    const date = c.createdAt ? new Date(c.createdAt).toLocaleDateString('ar-SA') : '';
    const stars = 'â­'.repeat(c.rating||0);
    return `<div class="comment-item">
      <div class="comment-meta">${c.author?'ğŸ‘¤ '+esc(String(c.author))+' | ':''} ğŸ• ${date}</div>
      <div class="comment-rating">${stars}</div>
      <div class="comment-text">${esc(String(c.text))}</div>
    </div>`;
  }).join('');
}

window.selectCommentStar = function(rKey, n) {
  COMMENT_RATINGS[rKey] = n;
  // Update stars UI
  const stars = document.querySelectorAll(`#cstars-${rKey} .star-sel`);
  stars.forEach((s, i) => s.classList.toggle('active', i < n));
  // Enable textarea and submit
  const txt = document.getElementById('ctxt-' + rKey);
  const sub = document.getElementById('csub-' + rKey);
  if(txt) { txt.disabled = false; txt.placeholder = 'Ø§ÙƒØªØ¨ ØªØ¹Ù„ÙŠÙ‚Ùƒ Ù‡Ù†Ø§...'; }
  if(sub) sub.disabled = false;
};

window.submitComment = function(rKey) {
  const txt = document.getElementById('ctxt-' + rKey);
  const sub = document.getElementById('csub-' + rKey);
  const rating = COMMENT_RATINGS[rKey] || USER_RATINGS[rKey] || 0;
  if(!rating) { toast('ÙŠØ¬Ø¨ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø¨Ø§Ù„Ù†Ø¬ÙˆÙ… Ø£ÙˆÙ„Ø§Ù‹ â­', 'terr'); return; }
  const text = txt ? txt.value.trim() : '';
  if(!text) { toast('Ø§ÙƒØªØ¨ ØªØ¹Ù„ÙŠÙ‚Ø§Ù‹ Ø£ÙˆÙ„Ø§Ù‹', 'terr'); return; }
  if(sub) { sub.disabled=true; sub.textContent='â³...'; }
  const comment = { text, rating, createdAt: Date.now() };
  push(ref(db, 'comments/' + rKey), comment)
    .then(() => {
      toast('ØªÙ… Ù†Ø´Ø± ØªØ¹Ù„ÙŠÙ‚Ùƒ âœ… Ø´ÙƒØ±Ø§Ù‹!');
      if(txt) txt.value = '';
      if(sub) { sub.disabled=false; sub.textContent='âœ‰ï¸ Ù†Ø´Ø± Ø§Ù„ØªØ¹Ù„ÙŠÙ‚'; }
    })
    .catch(err => {
      toast('Ø®Ø·Ø£: ' + err.message, 'terr');
      if(sub) { sub.disabled=false; sub.textContent='âœ‰ï¸ Ù†Ø´Ø± Ø§Ù„ØªØ¹Ù„ÙŠÙ‚'; }
    });
};

// Boot
loadLocal();
mergeData([]);
onValue(recipesRef,snap=>{
  const fbList=[];
  snap.forEach(child=>{const r=child.val();r._fbKey=child.key;ensureCat(r);fbList.push(r);});
  mergeData(fbList);
},err=>{console.warn(err);});
// Ratings real-time listener
onValue(ratingsRef,snap=>{
  RATINGS={};
  snap.forEach(child=>{RATINGS[child.key]=child.val();});
  render();
},err=>{console.warn('ratings:',err);});
document.getElementById('srch').addEventListener('input',e=>{Q=e.target.value.toLowerCase().trim();PAGE=1;render();});

// â•â•â•â• ADD RECIPE MODAL â•â•â•â•
window.openAddModal  = ()=>{ document.getElementById('addOv').classList.add('open'); document.body.style.overflow='hidden'; };
window.closeAddModal = ()=>{ document.getElementById('addOv').classList.remove('open'); document.body.style.overflow=''; };
document.getElementById('addOv').addEventListener('click', e=>{ if(e.target===e.currentTarget) window.closeAddModal(); });

window.onTypeChange = function(radio) {
  const iceField = document.getElementById('iceField');
  const iceInput = document.getElementById('rIce');
  if (radio.value === 'cold') {
    iceField.style.display = 'block';
    iceInput.required = true;
  } else {
    iceField.style.display = 'none';
    iceInput.required = false;
    iceInput.value = '';
  }
};

window.submitRecipe = function(e) {
  e.preventDefault();
  const catSel = document.querySelector('input[name="rc"]:checked');
  if(!catSel){ toast('Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„ØªØ­Ø¶ÙŠØ± â—','terr'); return; }
  const category = catSel.value;
  let name = document.getElementById('rN').value.trim();
  const iceVal = document.getElementById('rIce').value.trim();
  // Ø¥Ø¶Ø§ÙØ© ÙˆØ²Ù† Ø§Ù„Ø«Ù„Ø¬ Ù„Ø§Ø³Ù… Ø§Ù„ÙˆØµÙØ© Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø¨Ø§Ø±Ø¯Ø©
  if (category === 'cold' && iceVal) {
    name = name + ' (Ø§Ù„Ø«Ù„Ø¬ ' + iceVal + ' Ø¬Ø±Ø§Ù…)';
  }
  const r = {
    name,
    author:   document.getElementById('rA').value.trim(),
    brewer:   document.getElementById('rBr').value,
    dose:     document.getElementById('rD').value.trim(),
    ratio:    document.getElementById('rR').value.trim(),
    link:     document.getElementById('rL').value.trim(),
    category,
    addedAt:  Date.now()
  };
  if (category === 'cold' && iceVal) r.ice = iceVal;
  const btn = document.getElementById('submitBtn');
  btn.textContent='â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù†Ø´Ø±...'; btn.disabled=true;
  push(recipesRef, r)
    .then(()=>{
      toast('ØªÙ… Ù†Ø´Ø± ÙˆØµÙØªÙƒ Ø¨Ù†Ø¬Ø§Ø­ âœ… Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ!');
      window.closeAddModal();
      document.getElementById('rN').value='';
      document.getElementById('rA').value='';
      document.getElementById('rBr').value='';
      document.getElementById('rD').value='';
      document.getElementById('rR').value='';
      document.getElementById('rL').value='';
      document.getElementById('rIce').value='';
      document.getElementById('iceField').style.display='none';
      document.getElementById('rIce').required=false;
      document.querySelectorAll('input[name="rc"]').forEach(r=>r.checked=false);
    })
    .catch(err=>{ toast('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù†Ø´Ø±: '+err.message,'terr'); })
    .finally(()=>{ btn.textContent='ğŸ“¤ Ù†Ø´Ø± Ø§Ù„ÙˆØµÙØ©'; btn.disabled=false; });
};
</script>
</body>
</html>